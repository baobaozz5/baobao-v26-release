<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Baobao OS v26.0</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÇ</text></svg>">
    <meta property="og:title" content="Baobao OS v26.0 üéÇ">
    <meta property="og:description" content="Happy 26th Birthday, Naveen Sir! Access Granted.">
    <meta property="og:image" content="baobao.jpg">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Using font-display swap to avoid blocking rendering -->
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&family=Pacifico&family=Nunito:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <style>
        :root{
            --bg-color: #f2f4f6;
            --text-main: #2c3e50;
            --text-muted: #95a5a6;
            --window-bg: rgba(255,255,255,0.96);
            --icon-bg: #f2f4f6;
            --border-color: rgba(255,255,255,0.4);
            --shadow-icon: 12px 12px 24px rgba(163,177,198,0.5), -12px -12px 24px rgba(255,255,255,0.9);
            --shadow-window: 0 40px 100px rgba(0,0,0,0.15);
            --status-bar-bg: rgba(242,244,246,0.85);
            --accent-color: #007AFF;
            --app-size: 125px;
            --font-main: 'Public Sans', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            --font-script: 'Pacifico', cursive;
            --tinder-grad: linear-gradient(to right, #fd297b, #ff655b);
            --tinder-green: #2ee681;
            --tinder-red: #ec4768;
        }
        [data-theme="dark"]{
            --bg-color:#1a1a1a;
            --text-main:#f0f0f0;
            --text-muted:#888;
            --window-bg: rgba(40,40,40,0.96);
            --icon-bg:#2a2a2a;
            --border-color: rgba(255,255,255,0.05);
            --shadow-icon: 8px 8px 16px rgba(0,0,0,0.4), -4px -4px 12px rgba(255,255,255,0.05);
            --shadow-window: 0 40px 100px rgba(0,0,0,0.5);
            --status-bar-bg: rgba(26,26,26,0.85);
            --accent-color: #0A84FF;
        }

        *{ box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html,body{ height:100%; }
        body{
            margin:0;
            padding:0;
            background:var(--bg-color);
            color:var(--text-main);
            font-family:var(--font-main);
            width:100%;
            height:100vh;
            overflow: hidden; /* desktop-like app */
            -webkit-font-smoothing:antialiased;
        }

        /* status bar */
        .status-bar {
            position: fixed; top:0; left:0; right:0;
            height:48px; display:flex; align-items:center; justify-content:space-between;
            padding:0 20px; background:var(--status-bar-bg); z-index:200;
            backdrop-filter: blur(4px);
        }
        .status-left{ font-weight:700; font-size:13px; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; }
        .clock-group{ display:flex; gap:18px; align-items:center; }
        .clock-item{ font-weight:700; font-size:15px; }
        .clock-item span{ color:var(--text-muted); margin-right:8px; font-weight:600; font-size:12px; }

        /* desktop icons */
        .desktop{
            padding:80px 40px 40px 40px; max-width:1200px; margin:0 auto; display:flex; flex-wrap:wrap; justify-content:center; gap:40px;
            position:relative; height:100%; align-content:flex-start;
        }
        .app-item{ width:var(--app-size); display:flex; flex-direction:column; align-items:center; cursor:pointer; transition: transform .18s ease; user-select:auto; }
        .app-item:active{ transform:scale(.98); }
        .app-icon{ width:var(--app-size); height:var(--app-size); border-radius:20px; display:flex; align-items:center; justify-content:center; font-size:48px; background:var(--icon-bg); box-shadow:var(--shadow-icon); }
        .app-label{ margin-top:8px; font-weight:600; font-size:14px; text-align:center; }

        /* windows */
        .window{
            position: fixed;
            top:50%;
            left:50%;
            transform:translate(-50%,-45%) scale(.98);
            width:90%;
            max-width:800px;
            max-height:85vh;
            background:var(--window-bg);
            border-radius:18px;
            overflow:hidden;
            box-shadow:var(--shadow-window);
            opacity:0; pointer-events:none; transition: transform .28s cubic-bezier(.2,.9,.2,1), opacity .28s;
            display:flex; flex-direction:column;
            z-index: 300;
        }
        .window.open{ transform:translate(-50%,-50%) scale(1); opacity:1; pointer-events:auto; }
        .window-header{ display:flex; align-items:center; justify-content:space-between; padding:14px 18px; border-bottom:1px solid var(--border-color); flex-shrink:0; background:transparent; }
        .window-title{ font-weight:700; font-size:16px; color:var(--text-main); }
        .btn-close{ width:32px; height:32px; border-radius:50%; border:none; background:rgba(0,0,0,0.06); cursor:pointer; display:inline-flex; align-items:center; justify-content:center; font-size:14px; }

        .window-content{ padding:28px; overflow-y:auto; -webkit-overflow-scrolling:touch; touch-action:pan-y; flex:1; }

        /* soundboard */
        .sound-grid{ display:grid; grid-template-columns:1fr 1fr; gap:14px; }
        .sound-btn{ padding:16px; border-radius:12px; background:var(--icon-bg); border:1px solid var(--border-color); cursor:pointer; font-weight:700; display:flex; align-items:center; gap:10px; justify-content:center; }
        .sound-alert{ text-align:center; color:#FF3B30; font-weight:800; text-transform:uppercase; letter-spacing:1px; font-size:12px; margin-bottom:12px; }

        /* tinder */
        .tinder-container{ height:100%; display:flex; flex-direction:column; align-items:center; justify-content:space-between; padding-bottom:20px; position:relative; }
        .tinder-card-wrap{ flex:1; width:100%; max-width:380px; position:relative; perspective:1000px; touch-action:none; display:flex; align-items:center; justify-content:center; }
        .tinder-card{ width:100%; height:100%; max-height:520px; background:#fff; border-radius:18px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.15); position:absolute; top:0; left:0; background-size:cover; background-position:center; will-change:transform,opacity; transform:translate3d(0,0,0); display:flex; align-items:flex-end; }
        .tinder-overlay{ width:100%; padding:24px; background:linear-gradient(to top, rgba(0,0,0,0.75), transparent); color:#fff; }
        .tinder-name{ font-size:28px; font-weight:800; margin:0; text-shadow:0 2px 6px rgba(0,0,0,0.35); }
        .tinder-actions{ display:flex; gap:20px; margin-top:12px; z-index:5; }
        .tinder-btn{ width:60px; height:60px; border-radius:50%; border:none; background:#fff; box-shadow:0 8px 20px rgba(0,0,0,0.12); font-size:26px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; }
        .tinder-btn.like{ color:var(--tinder-green); font-size:28px; }
        .tinder-match{ position:absolute; inset:0; background:rgba(0,0,0,0.9); z-index:12; display:flex; flex-direction:column; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:opacity .3s ease; }
        .tinder-match.active{ opacity:1; pointer-events:auto; }
        .match-title{ font-family:var(--font-script); font-size:56px; background:var(--tinder-grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; margin-bottom:20px; }
        .match-photos{ display:flex; gap:10px; align-items:center; justify-content:center; margin-bottom:20px; }
        .match-img{ width:120px; height:120px; border-radius:50%; border:4px solid white; object-fit:cover; box-shadow:0 10px 30px rgba(0,0,0,0.4); }

        .tinder-chat{ position:absolute; inset:0; background:var(--window-bg); z-index:16; display:flex; flex-direction:column; opacity:0; pointer-events:none; transform:translateY(8px); transition:opacity .28s, transform .28s; }
        .tinder-chat.active{ opacity:1; pointer-events:auto; transform:translateY(0); }

        .chat-body{ flex:1; padding:16px; overflow:auto; display:flex; flex-direction:column; gap:8px; -webkit-overflow-scrolling:touch; }
        .chat-bubble{ background:#e5e5ea; padding:10px 14px; border-radius:16px; max-width:80%; align-self:flex-start; color:#111; }
        .chat-bubble.me{ background:var(--accent-color); color:white; align-self:flex-end; }

        /* swipe hint */
        .swipe-hint{
            position:absolute; top:12px; right:12px;
            background:rgba(0,0,0,0.55); color:white; padding:8px 12px; border-radius:20px; font-weight:700; z-index:6;
            pointer-events:none; opacity:0.95; transition:opacity .25s, transform .25s;
        }
        .swipe-hint.hidden{ opacity:0; transform:translateY(-8px); }

        /* confetti canvas */
        #confetti-canvas{ position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9999; }

        /* helpers & responsive tweaks */
        .video-wrapper{ position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:12px; background:#000; }
        .video-wrapper iframe{ position:absolute; inset:0; width:100%; height:100%; border:0; }

        @media(max-width:768px){
            body{ overflow:auto; } /* allow page to scroll on small screens if needed */
            .desktop{ padding:70px 16px 24px 16px; gap:20px; }
            .app-icon{ width:88px; height:88px; font-size:40px; border-radius:14px; }
            .app-label{ font-size:12px; }
            .tinder-card{ max-height:420px; box-shadow:0 8px 20px rgba(0,0,0,0.12); }
            /* reduce heavy shadows on mobile */
            :root { --shadow-window: 0 20px 40px rgba(0,0,0,0.12); }
        }
    </style>
</head>
<body>

    <div class="status-bar" role="banner">
        <div class="status-left">Baobao OS v26.0</div>
        <div class="clock-group" aria-hidden="false">
            <div class="clock-item" id="clock-tpe"><span>TPE</span> --:--</div>
            <div class="clock-item" id="clock-del"><span>DEL</span> --:--</div>
        </div>
    </div>

    <main class="desktop" role="main" aria-label="Desktop">
        <div class="app-item" onclick="openWindow('win-sticky')" role="button" aria-label="Open Notes"><div class="app-icon">üìå</div><div class="app-label">Notes</div></div>
        <div class="app-item" onclick="openWindow('win-readme')" role="button" aria-label="Open README"><div class="app-icon">üìÑ</div><div class="app-label">README</div></div>
        <div class="app-item" onclick="openWindow('win-photo')" role="button" aria-label="Open Photos"><div class="app-icon">üñºÔ∏è</div><div class="app-label">Photo</div></div>
        <div class="app-item" onclick="openWindow('win-music')" role="button" aria-label="Open Voice Note"><div class="app-icon">üéµ</div><div class="app-label">Voice Note</div></div>
        <div class="app-item" onclick="openWindow('win-youtube')" role="button" aria-label="Open Anthem"><div class="app-icon icon-youtube">üì∫</div><div class="app-label">Anthem</div></div>
        <div class="app-item" onclick="openWindow('win-monitor'); startMonitor();" role="button" aria-label="Open Activity"><div class="app-icon icon-sys">üìä</div><div class="app-label">Activity</div></div>
        <div class="app-item" onclick="openWindow('win-terminal'); focusTerminal();" role="button" aria-label="Open Terminal"><div class="app-icon">üìü</div><div class="app-label">Terminal</div></div>
        <div class="app-item" onclick="openWindow('win-settings')" role="button" aria-label="Open Settings"><div class="app-icon">‚öôÔ∏è</div><div class="app-label">Settings</div></div>
        <div class="app-item" onclick="openWindow('win-code')" role="button" aria-label="Open Source"><div class="app-icon">üíª</div><div class="app-label">Source</div></div>
        <div class="app-item" onclick="openWindow('win-sound')" role="button" aria-label="Open Soundboard"><div class="app-icon icon-sound">üéπ</div><div class="app-label">Soundboard</div></div>
        <div class="app-item" onclick="openWindow('win-tinder'); startTinder();" role="button" aria-label="Open Matches"><div class="app-icon icon-letter">üî•</div><div class="app-label">Matches</div></div>
        <div class="app-item" onclick="deploySystem()" role="button" aria-label="Deploy"><div class="app-icon icon-deploy">üöÄ</div><div class="app-label">Deploy</div></div>
    </main>

    <!-- Notes Window -->
    <div id="win-sticky" class="window" aria-hidden="true">
        <div class="window-header"><div class="window-title">Notes</div><button class="btn-close" onclick="closeWindow('win-sticky')" aria-label="Close">‚úï</button></div>
        <div class="window-content">
            <p style="margin:0 0 8px 0;">Quick notes...</p>
            <textarea style="width:100%;height:160px;border-radius:8px;padding:12px;border:1px solid var(--border-color);background:var(--icon-bg);"></textarea>
        </div>
    </div>

    <!-- YouTube Window (iframe lazy-loaded) -->
    <div id="win-youtube" class="window" style="max-width:800px;background:black;" aria-hidden="true">
        <div class="window-header" style="background:rgba(255,255,255,0.05);border-bottom:none;"><div class="window-title">Anthem</div><button class="btn-close" onclick="closeWindow('win-youtube')" aria-label="Close">‚úï</button></div>
        <div class="window-content" style="padding:12px;">
            <div class="video-wrapper" id="youtube-wrapper" data-src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&rel=0"></div>
        </div>
    </div>

    <!-- README window (contains the npm install block - preserved exactly as requested) -->
    <div id="win-readme" class="window" aria-hidden="true">
        <div class="window-header"><div class="window-title">README</div><button class="btn-close" onclick="closeWindow('win-readme')" aria-label="Close">‚úï</button></div>
        <div class="window-content readme-content">
            <h1>Baobao OS v26</h1>
            <p>Some fun README content...</p>
npm install unlimited-love 
npm install hard-dih --essential
npm install video-call --frequency=daily
npm install tongue --wannalickyou
npm install gym-workout  --sweatybabe
        
# Optional but Recommended
npm install blueberries 
npm install chole-bhature --remote-wish
            <hr style="margin:18px 0; border:0; border-top:1px solid var(--border-color);" />
            <h2>‚ö†Ô∏è Known Issues</h2>
            <ul>
                <li><strong>Latency Warning:</strong> Some animations may be reduced on low-end devices.</li>
            </ul>
        </div>
    </div>

    <!-- Photo / Other windows (concise) -->
    <div id="win-photo" class="window" aria-hidden="true">
        <div class="window-header"><div class="window-title">Photos</div><button class="btn-close" onclick="closeWindow('win-photo')" aria-label="Close">‚úï</button></div>
        <div class="window-content">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                <img src="baobao.jpg" alt="Baobao" style="width:100%;border-radius:8px;object-fit:cover;">
                <img src="tinder-profile.jpg" alt="Profile" style="width:100%;border-radius:8px;object-fit:cover;">
            </div>
        </div>
    </div>

    <!-- Terminal -->
    <div id="win-terminal" class="window" aria-hidden="true" style="max-width:700px;">
        <div class="window-header" style="background:#1e1e1e;border:none;color:#fff;"><div class="window-title" style="color:#ddd;">Terminal</div><button class="btn-close" onclick="closeWindow('win-terminal')" aria-label="Close">‚úï</button></div>
        <div class="window-content" style="background:#121212;color:#eee;padding:12px;font-family:var(--font-mono);">
            <div id="term-output" style="height:240px; overflow:auto; padding:8px; border-radius:6px; background:#0f0f0f; color:#ddd; font-size:13px;"></div>
            <div style="display:flex;gap:8px;margin-top:12px;">
                <input id="term-input" type="text" placeholder="Type a command..." style="flex:1;padding:8px;border-radius:6px;border:1px solid #333;background:#0b0b0b;color:#eee;" onkeydown="handleCommand(event)">
                <button class="btn-close" onclick="document.getElementById('term-input').value='';" aria-label="Clear">Clear</button>
            </div>
        </div>
    </div>

    <!-- Music (voice note) -->
    <div id="win-music" class="window" style="max-width:420px;" aria-hidden="true">
        <div class="window-header"><div class="window-title">Voice Note</div><button class="btn-close" onclick="closeWindow('win-music')" aria-label="Close">‚úï</button></div>
        <div class="window-content">
            <div class="audio-player-ui">
                <button id="play-btn" onclick="togglePlay()" aria-label="Play">‚ñ∂</button>
                <input id="seek-slider" type="range" min="0" max="100" value="0" style="width:70%;vertical-align:middle;">
            </div>
            <!-- lazy-loaded audio: data-src used; real src assigned when window opens -->
            <audio id="audio-file" preload="none" data-src="voice-note.mp3"></audio>
        </div>
    </div>

    <!-- Monitor -->
    <div id="win-monitor" class="window" style="max-width:520px;" aria-hidden="true">
        <div class="window-header"><div class="window-title">Activity Monitor</div><button class="btn-close" onclick="closeWindow('win-monitor')" aria-label="Close">‚úï</button></div>
        <div class="window-content">
            <div class="monitor-row">
                <div class="monitor-label"><span>CPU</span><span id="val-cpu">--%</span></div>
                <div style="background:var(--icon-bg);height:12px;border-radius:8px;overflow:hidden;"><div id="bar-cpu" style="width:0;height:12px;background:var(--accent-color);"></div></div>
            </div>
            <div class="monitor-row">
                <div class="monitor-label"><span>Memory</span><span id="val-mem">--%</span></div>
                <div style="background:var(--icon-bg);height:12px;border-radius:8px;overflow:hidden;"><div id="bar-mem" style="width:0;height:12px;background:#ffcc00;"></div></div>
            </div>
            <div class="monitor-row">
                <div class="monitor-label"><span>HR</span><span id="val-hr">-- BPM</span></div>
                <div style="background:var(--icon-bg);height:12px;border-radius:8px;overflow:hidden;"><div id="bar-hr" style="width:0;height:12px;background:#ff6b81;"></div></div>
            </div>
        </div>
    </div>

    <!-- Settings -->
    <div id="win-settings" class="window" style="max-width:420px;" aria-hidden="true">
        <div class="window-header"><div class="window-title">Settings</div><button class="btn-close" onclick="closeWindow('win-settings')" aria-label="Close">‚úï</button></div>
        <div class="window-content">
            <div style="display:flex;flex-direction:column;gap:12px;">
                <div><strong>Theme</strong></div>
                <div style="display:flex;gap:8px;"><button onclick="toggleTheme(this)">Toggle Dark</button></div>
            </div>
        </div>
    </div>

    <!-- Code window -->
    <div id="win-code" class="window" style="max-width:640px;" aria-hidden="true">
        <div class="window-header"><div class="window-title">kernel_love.cpp</div><button class="btn-close" onclick="closeWindow('win-code')" aria-label="Close">‚úï</button></div>
        <div class="window-content" style="font-family:var(--font-mono); font-size:13px;">
            <pre style="white-space:pre-wrap;">
#include &lt;iostream&gt;
using namespace std;

class Relationship {
public:
    string him;
    string her;
    int distance_km;

    Relationship(string h, string w) {
        him = h;
        her = w;
        distance_km = 4300;
    }

    void maintain_connection() {
        while (true) {
            if (distance_km > 0) {
                // video_call();
                // TODO: Merge in Feb 2026
            } else {
                // hug();
            }
        }
    }
};

int main() {
    Relationship baobao("Naveen", "Abi");
    // baobao.maintain_connection();
    return 0;
}
            </pre>
        </div>
    </div>

    <!-- Soundboard -->
    <div id="win-sound" class="window" style="max-width:520px;" aria-hidden="true">
        <div class="window-header"><div class="window-title">Soundboard</div><button class="btn-close" onclick="closeWindow('win-sound')" aria-label="Close">‚úï</button></div>
        <div class="window-content">
            <div class="sound-alert">üîä Please turn on sound</div>
            <div class="sound-grid">
                <div class="sound-btn" onclick="playSound('snd1')"><span>üë¶</span> Naveen Sir</div>
                <div class="sound-btn" onclick="playSound('snd2')"><span>üìû</span> Ling Yo Phone</div>
                <div class="sound-btn" onclick="playSound('snd3')"><span>ü§®</span> Why are you black</div>
                <div class="sound-btn" onclick="playSound('snd4')"><span>‚ù§Ô∏è</span> Tumhe pyaar</div>
                <div class="sound-btn" onclick="playSound('snd5')"><span>üß∏</span> Wo ai ni bao bao</div>
                <div class="sound-btn" onclick="playSound('snd6')"><span>üéÇ</span> Happy Birthday</div>
            </div>

            <div style="border-radius:12px;overflow:hidden;margin-top:12px;">
                <iframe id="spotify-embed" style="border-radius:12px" data-src="https://open.spotify.com/embed/track/1BYZxKSf0aTxp8ZFoeyM3d?utm_source=generator" width="100%" height="152" frameborder="0" allowfullscreen="" loading="lazy"></iframe>
            </div>

            <audio id="snd1" data-src="sound-naveen.mp3"></audio>
            <audio id="snd2" data-src="sound-ling.mp3"></audio>
            <audio id="snd3" data-src="sound-black.mp3"></audio>
            <audio id="snd4" data-src="sound-hindi1.mp3"></audio>
            <audio id="snd5" data-src="sound-hindi2.mp3"></audio>
            <audio id="snd6" data-src="sound-hindi3.mp3"></audio>
        </div>
    </div>

    <!-- Tinder / Matches -->
    <div id="win-tinder" class="window" style="max-width:450px; height:750px; max-height:85vh;" aria-hidden="true">
        <div class="window-header"><div class="window-title">Matches</div><button class="btn-close" onclick="closeWindow('win-tinder')" aria-label="Close">‚úï</button></div>
        <div class="window-content" style="padding:20px; display:flex; flex-direction:column; height:100%; overflow:hidden; position:relative;">
            <div id="tinder-swipe-interface" class="tinder-container">
                <div class="tinder-card-wrap" id="card-wrap">
                    <div id="tinder-card" class="tinder-card" style="background-image:url('tinder-profile.jpg');">
                        <div class="tinder-overlay"><h2 class="tinder-name">ÊØî, 24</h2></div>
                        <div class="swipe-hint" id="swipe-hint">Swipe ‚Üí</div>
                    </div>
                </div>

                <div class="tinder-actions">
                    <button class="tinder-btn nope" onclick="alert(left swipe not allowed hehe')" aria-label="Nope">‚úï</button>
                    <button class="tinder-btn like" onclick="handleSwipeRight()" aria-label="Like">‚ô•</button>
                </div>
            </div>

            <div id="tinder-match-screen" class="tinder-match" aria-hidden="true">
                <div class="match-title">It's a Match!</div>
                <div class="match-photos">
                    <img src="tinder-profile.jpg" alt="You" class="match-img" style="z-index:2;">
                    <img src="him.jpg" alt="Him" class="match-img" style="z-index:1;">
                </div>
                <p style="font-size:14px;color:#fff;margin-bottom:14px;">You and Abi have liked each other.</p>
                <button class="chat-send" onclick="showChat()" style="width:80%;font-size:16px;">Send a Message</button>
            </div>

            <div id="tinder-chat-screen" class="tinder-chat" aria-hidden="true">
                <div class="chat-header" style="padding:12px;border-bottom:1px solid var(--border-color);font-weight:700;text-align:center;">Abi</div>
                <div class="chat-body" id="chat-body-content">
                    <div class="chat-system">You matched with Abi on Oct 13, 2025</div>
                    <div class="chat-bubble">hello, how are u? i am under the water... please help me </div>
                    <div class="chat-bubble">btw i am able to receive yo texts... </div>
                </div>
                <div class="chat-input-area" style="padding:12px;border-top:1px solid var(--border-color);display:flex;gap:8px;">
                    <input type="text" id="tinder-msg-input" class="chat-input" placeholder="Type a message..." style="flex:1;padding:10px;border-radius:20px;border:1px solid var(--border-color);">
                    <button class="chat-send" onclick="sendTinderMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- overlay/confetti -->
    <div id="overlay" onclick="closeOverlay()" style="text-align:center;">
        <h1>Happy Birthday Naveen Sir!</h1>
        <p>Baobao OS Update Complete.</p>
        <div style="font-size:5rem;">üéÇ</div>
        <p style="margin-top:16px;color:#888;">(Click anywhere to enter)</p>
    </div>
    <canvas id="confetti-canvas"></canvas>

    <script>
    // --- Utilities & defensive helpers ---
    function el(id){ return document.getElementById(id); }
    function safeSetSrc(elm, srcAttr){
        if(!elm) return;
        const src = elm.getAttribute && elm.getAttribute(srcAttr);
        if(src && !elm.src){
            elm.src = src;
        }
    }
    function escapeHtml(str){ return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[s]); }

    // F12 console easter egg
    console.log("%c Happy Birthday Naveen üéÇ", "font-size:30px; font-weight:bold; color:#FF2D55; background:#fff; padding:10px; border-radius:5px;");
    console.log("Waiting for our meet hehe");

    // Window management
    function openWindow(id){
        document.querySelectorAll('.window').forEach(w => w.classList.remove('open'));
        const win = el(id);
        if(!win) return;
        win.classList.add('open');
        // lazy-load assets when window opens
        if(id === 'win-youtube'){
            const wrapper = el('youtube-wrapper');
            if(wrapper){
                const src = wrapper.getAttribute('data-src');
                if(src && !wrapper.querySelector('iframe')){
                    const iframe = document.createElement('iframe');
                    iframe.width = "100%";
                    iframe.height = "400";
                    iframe.src = src;
                    iframe.frameBorder = "0";
                    iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
                    iframe.allowFullscreen = true;
                    wrapper.appendChild(iframe);
                }
            }
        }
        if(id === 'win-music'){
            const a = el('audio-file');
            if(a && a.dataset && a.dataset.src && !a.src) a.src = a.dataset.src;
        }
        if(id === 'win-sound'){
            // load sound audio tags src if not loaded
            ['snd1','snd2','snd3','snd4','snd5','snd6'].forEach(i => {
                const s = el(i);
                if(s && s.dataset && s.dataset.src && !s.src) s.src = s.dataset.src;
            });
            // lazy load spotify iframe
            const sp = el('spotify-embed');
            if(sp) safeSetSrc(sp, 'data-src');
        }
        if(id === 'win-readme'){
            // nothing special
        }
        if(id === 'win-tinder'){
            startTinder && startTinder();
        }
    }

    function closeWindow(id){
        const win = el(id);
        if(!win) return;
        win.classList.remove('open');
        // cleanup specific windows
        if(id === 'win-youtube'){
            const wrapper = el('youtube-wrapper');
            if(wrapper) wrapper.innerHTML = '';
        }
        if(id === 'win-monitor'){
            stopMonitor();
        }
        if(id === 'win-tinder'){
            setTimeout(()=> {
                const card = el('tinder-card');
                if(card){ card.style.transform=''; card.style.opacity='1'; }
                const match = el('tinder-match-screen'); if(match) match.classList.remove('active');
                const chat = el('tinder-chat-screen'); if(chat) chat.classList.remove('active');
                const hint = el('swipe-hint'); if(hint) hint.classList.remove('hidden');
            }, 300);
        }
    }

    function toggleTheme(btn){
        btn && btn.classList.toggle('active');
        if(document.body.getAttribute('data-theme') === 'dark') document.body.removeAttribute('data-theme');
        else document.body.setAttribute('data-theme','dark');
    }

    function playSound(id){
        const s = el(id);
        if(!s){
            alert('Sound file not found! Check filenames.');
            return;
        }
        if(!s.src && s.dataset && s.dataset.src) s.src = s.dataset.src;
        s.currentTime = 0;
        s.play().catch(()=> { alert('Unable to play sound.'); });
    }

    function closeOverlay(){ const o = el('overlay'); if(o) o.style.display='none'; }

    // --- Clock (robust) ---
    function formatTimeForTZ(date, tz){
        try{
            const fmt = new Intl.DateTimeFormat('en-GB',{ hour:'2-digit', minute:'2-digit', hour12:false, timeZone:tz });
            const parts = fmt.formatToParts(date);
            const hourP = parts.find(p=>p.type==='hour');
            const minP = parts.find(p=>p.type==='minute');
            let hour = hourP ? hourP.value : '00';
            const minute = minP ? minP.value : '00';
            if(hour === '24') hour = '00';
            return `${hour}:${minute}`;
        } catch(e){
            try {
                const s = date.toLocaleTimeString('en-GB',{ hour:'2-digit', minute:'2-digit', hour12:false, timeZone:tz });
                return s.startsWith('24') ? s.replace('24','00') : s;
            } catch(e2){
                return '--:--';
            }
        }
    }
    function updateClock(){
        const now = new Date();
        const tpe = el('clock-tpe'); if(tpe) tpe.innerHTML = `<span>TPE</span> ${formatTimeForTZ(now,'Asia/Taipei')}`;
        const del = el('clock-del'); if(del) del.innerHTML = `<span>DEL</span> ${formatTimeForTZ(now,'Asia/Kolkata')}`;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // --- Audio player ---
    const audioEl = el('audio-file');
    const playBtn = el('play-btn');
    const seekSlider = el('seek-slider');
    function togglePlay(){
        if(!audioEl) return;
        if(!audioEl.src && audioEl.dataset && audioEl.dataset.src) audioEl.src = audioEl.dataset.src;
        if(audioEl.paused){ audioEl.play().then(()=>{ if(playBtn) playBtn.textContent='‚è∏'; }).catch(()=> alert('Upload voice-note.mp3!')); }
        else { audioEl.pause(); if(playBtn) playBtn.textContent='‚ñ∂'; }
    }
    if(audioEl){
        audioEl.addEventListener('timeupdate', ()=> { if(seekSlider && audioEl.duration) seekSlider.value = (audioEl.currentTime / audioEl.duration) * 100; });
        seekSlider && seekSlider.addEventListener('input', ()=> { if(audioEl.duration) audioEl.currentTime = (seekSlider.value/100) * audioEl.duration; });
    }

    // --- Terminal ---
    function focusTerminal(){ setTimeout(()=> { const t = el('term-input'); t && t.focus(); }, 80); }
    function handleCommand(e){
        if(e.key !== 'Enter') return;
        const input = el('term-input'); const output = el('term-output');
        if(!input || !output) return;
        const cmd = input.value.trim();
        if(!cmd) return;
        // limit output growth
        const maxLines = 400;
        while(output.childNodes.length > maxLines) output.removeChild(output.firstChild);
        const pre = document.createElement('div');
        pre.innerHTML = `<span style="color:#4af626">naveen@baobao:~$</span> ${escapeHtml(cmd)}`;
        output.appendChild(pre);
        let response = '';
        switch(cmd.toLowerCase()){
            case 'help': response = "Commands: love, abi, blanket, chai, chopsticks, lick, clear"; break;
            case 'love': response = "Start: 2025-10-13.<br>Status: We are going stronger!!"; break;
            case 'abi': response = "Just a reminder that somewhere in the world, someone is always thinking of you"; break;
            case 'blanket': response = "Deploying virtual blanket üõå Warmth level: 100%. Snuggle mode ON "; break;
            case 'chai': response = "Brewing Chai... Spice level: As hot as you. Sipping together "; break;
            case 'chopsticks': response = "Skill check: Expert ü•¢ Ready for noodles date in Taiwan hehe"; break;
            case 'lick': response = "SUS why are you typing this üëÖ"; break;
            case 'clear': output.innerHTML = ''; input.value=''; return;
            default: response = `Command not found: ${escapeHtml(cmd)}. Try 'help'.`;
        }
        const resp = document.createElement('div');
        resp.style.color = '#ccc'; resp.style.marginBottom = '10px';
        resp.innerHTML = response;
        output.appendChild(resp);
        input.value = '';
        output.scrollTop = output.scrollHeight;
    }

    // --- Monitor (Page Visibility optimized) ---
    let monitorInterval = null;
    function startMonitor(){
        if(monitorInterval) return;
        const cpu = el('bar-cpu'); const mem = el('bar-mem'); const hr = el('bar-hr');
        const valCpu = el('val-cpu'); const valMem = el('val-mem'); const valHr = el('val-hr');
        if(!cpu) return;
        // run only when page visible
        function tick(){
            let c = Math.floor(Math.random() * 6) + 95;
            cpu.style.width = c + '%'; valCpu && (valCpu.innerText = c + '%');
            mem.style.width = '99%'; valMem && (valMem.innerText='99%');
            let h = Math.floor(Math.random() * 20) + 110;
            hr.style.width = (h/2) + '%'; valHr && (valHr.innerText = h + ' BPM');
        }
        tick();
        monitorInterval = setInterval(tick, 900);
    }
    function stopMonitor(){
        if(monitorInterval){ clearInterval(monitorInterval); monitorInterval = null; }
    }
    document.addEventListener('visibilitychange', ()=> {
        if(document.hidden) stopMonitor(); else { /* resume if monitor window open */ }
    }, { passive: true });

    // --- Tinder: pointer events + requestAnimationFrame + swipe hint ---
    (function(){
        const card = el('tinder-card');
        const cardWrap = el('card-wrap');
        const swipeHint = el('swipe-hint');
        if(!card || !cardWrap) return;
        let dragging = false;
        let startX = 0;
        let translateX = 0;
        let rotation = 0;
        let rafId = null;

        function update(){
            card.style.transform = `translate3d(${translateX}px,0,0) rotate(${rotation}deg)`;
            rafId = null;
        }
        function schedule(){
            if(!rafId) rafId = requestAnimationFrame(update);
        }

        function onDown(e){
            dragging = true;
            startX = e.clientX || (e.touches && e.touches[0] && e.touches[0].clientX) || 0;
            card.style.transition = 'none';
            swipeHint && swipeHint.classList.add('hidden');
            if(e.pointerId && card.setPointerCapture) try{ card.setPointerCapture(e.pointerId); }catch(err){}
        }
        function onMove(e){
            if(!dragging) return;
            const clientX = e.clientX || (e.touches && e.touches[0] && e.touches[0].clientX) || 0;
            translateX = clientX - startX;
            rotation = translateX * 0.08;
            schedule();
        }
        function onUp(e){
            if(!dragging) return;
            dragging = false;
            card.style.transition = 'transform .45s cubic-bezier(.2,.9,.2,1), opacity .45s';
            try{ if(e.pointerId && card.releasePointerCapture) card.releasePointerCapture(e.pointerId); }catch(err){}
            if(translateX > 110){
                // right swipe -> match
                card.style.transform = `translate3d(500px,0,0) rotate(45deg)`;
                card.style.opacity = '0';
                swipeHint && swipeHint.classList.add('hidden');
                setTimeout(()=> { const match = el('tinder-match-screen'); match && match.classList.add('active'); }, 600);
            } else if(translateX < -110){
                // bounce back and show hint
                card.style.transform = 'translate3d(0,0,0) rotate(0)';
                card.style.opacity = '1';
                setTimeout(()=> swipeHint && swipeHint.classList.remove('hidden'), 300);
                setTimeout(()=> alert('Only Right Swipe allowed hehe'), 80);
            } else {
                // snap back
                card.style.transform = 'translate3d(0,0,0) rotate(0)';
                card.style.opacity = '1';
                setTimeout(()=> swipeHint && swipeHint.classList.remove('hidden'), 300);
            }
            translateX = 0; rotation = 0;
        }

        // pointer events
        card.addEventListener('pointerdown', onDown, { passive: true });
        card.addEventListener('pointermove', onMove, { passive: true });
        card.addEventListener('pointerup', onUp, { passive: true });
        card.addEventListener('pointercancel', onUp, { passive: true });
        // touch fallback (some browsers)
        card.addEventListener('touchstart', onDown, { passive: true });
        card.addEventListener('touchmove', onMove, { passive: true });
        card.addEventListener('touchend', onUp, { passive: true });
        // keyboard accessibility
        card.setAttribute('tabindex','0');
        card.addEventListener('keydown', (e)=> { if(e.key === 'Enter') handleSwipeRight(); });

        // expose functions
        window.startTinder = function(){
            setTimeout(()=> {
                card.style.transform=''; card.style.opacity='1';
                const match = el('tinder-match-screen'); match && match.classList.remove('active');
                const chat = el('tinder-chat-screen'); chat && chat.classList.remove('active');
                swipeHint && swipeHint.classList.remove('hidden');
            }, 100);
        };
        window.handleSwipeRight = function(){
            card.style.transition = 'transform 0.8s ease, opacity 0.8s ease';
            card.style.transform = 'translate3d(500px,0,0) rotate(45deg)';
            card.style.opacity = '0';
            swipeHint && swipeHint.classList.add('hidden');
            setTimeout(()=> { const match = el('tinder-match-screen'); match && match.classList.add('active'); }, 600);
        };
    })();

    function showChat(){
        el('tinder-match-screen') && el('tinder-match-screen').classList.remove('active');
        el('tinder-chat-screen') && el('tinder-chat-screen').classList.add('active');
        setTimeout(()=> { const t = el('tinder-msg-input'); t && t.focus(); }, 300);
    }

    async function sendTinderMessage(){
        const input = el('tinder-msg-input'); const btn = document.querySelector('.chat-send'); const chatBody = el('chat-body-content');
        if(!input || !chatBody || !btn) return;
        const msg = input.value.trim();
        if(!msg) return;
        const bubble = document.createElement('div'); bubble.className='chat-bubble me'; bubble.innerText = msg;
        chatBody.appendChild(bubble);
        // keep recent limit
        while(chatBody.children.length > 300) chatBody.removeChild(chatBody.firstChild);
        chatBody.scrollTop = chatBody.scrollHeight;
        input.value = '';
        const original = btn.innerText;
        btn.innerText = 'Sending...';
        const formId = 'mqeavvar';
        try{
            await fetch(`https://formspree.io/f/${formId}`, {
                method:'POST',
                headers:{ 'Content-Type':'application/json' },
                body: JSON.stringify({ message: "Tinder Chat: " + msg })
            });
            btn.innerText = 'Sent!';
            setTimeout(()=> btn.innerText = original, 1300);
        } catch(err){
            btn.innerText = 'Error';
            alert("Please replace 'mqeavvar' with your real ID.");
            setTimeout(()=> btn.innerText = original, 1300);
        }
    }

    // --- Confetti (optimized) ---
    const cvs = el('confetti-canvas');
    const ctx = cvs && cvs.getContext ? cvs.getContext('2d') : null;
    if(cvs){
        function setCanvasSize(){ cvs.width = window.innerWidth; cvs.height = window.innerHeight; }
        setCanvasSize();
        window.addEventListener('resize', setCanvasSize, { passive:true });
    }
    let confetti = [];
    let confettiSpawning = false;
    const colors = ['#007AFF','#FF2D55','#5856D6','#FF9500'];
    function isLowEnd(){
        try { return (window.innerWidth < 420) || (navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 2); } catch(e){ return false; }
    }
    function spawnConfetti(){
        if(!cvs) return;
        const count = isLowEnd() ? 60 : 150;
        for(let i=0;i<count;i++){
            confetti.push({
                x: Math.random()*cvs.width,
                y: Math.random()*-cvs.height,
                c: colors[Math.floor(Math.random()*colors.length)],
                s: Math.random()*8 + 5,
                v: Math.random()*3 + 2,
                a: Math.random()*Math.PI*2
            });
        }
    }
    function drawConfetti(){
        if(!ctx || !cvs) return;
        ctx.clearRect(0,0,cvs.width,cvs.height);
        let active=0;
        for(let i=0;i<confetti.length;i++){
            const p = confetti[i];
            p.y += p.v;
            p.x += Math.sin(p.a)*2;
            p.a += 0.02;
            if(p.y < cvs.height){
                ctx.fillStyle = p.c;
                ctx.fillRect(p.x,p.y,p.s,p.s);
                active++;
            } else if(confettiSpawning){
                p.y = -10;
                p.x = Math.random()*cvs.width;
                active++;
            }
        }
        if(active>0) requestAnimationFrame(drawConfetti);
    }

    function deploySystem(){
        el('overlay') && el('overlay').classList && el('overlay').classList.add('show');
        confettiSpawning = true;
        spawnConfetti();
        drawConfetti();
        setTimeout(()=> confettiSpawning = false, 3000);
    }

    // --- Lazy & defensive load for audio/iframe on open of windows handled in openWindow ---

    // Accessibility & small fixes
    // ensure body scroll on mobile but keep app feel - we've allowed overflow:auto in media query
    // Keep user selection allowed for text
    document.addEventListener('DOMContentLoaded', function(){
        // remove global user-select:none for content text selection
        document.body.style.userSelect = 'auto';
    });

    </script>
</body>
</html>
