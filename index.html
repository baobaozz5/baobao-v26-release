<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Baobao OS v26.0</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <style>
        :root {
            /* Palette: Ultra Minimalist "Titanium White" */
            --bg-color: #f2f4f6;
            --text-main: #2c3e50;
            --text-muted: #95a5a6;
            --window-bg: rgba(255, 255, 255, 0.96);
            
            /* High Quality Shadows */
            --shadow-icon: 
                10px 10px 20px rgba(163, 177, 198, 0.4), 
                -10px -10px 20px rgba(255, 255, 255, 0.8);
            --shadow-window: 0 40px 100px rgba(0,0,0,0.15);
            
            /* Sizing */
            --app-size: 125px; 
            
            /* Fonts */
            --font-main: 'Open Sans', sans-serif;
            --font-mono: "SF Mono", "Menlo", monospace;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-main);
            height: 100vh; width: 100vw;
            overflow: hidden;
            user-select: none;
        }

        /* --- Status Bar --- */
        .status-bar {
            position: fixed; top: 0; left: 0; width: 100%; height: 44px;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 25px;
            font-size: 13px; font-weight: 600;
            color: var(--text-main);
            z-index: 1000;
            background: rgba(242, 244, 246, 0.85);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(0,0,0,0.03);
        }
        
        .status-left { letter-spacing: 0.5px; text-transform: uppercase; font-size: 12px; color: var(--text-muted); font-weight: 700; }
        .clock-group { display: flex; gap: 25px; }
        .clock-item span { color: var(--text-muted); margin-right: 6px; font-weight: 600; font-size: 11px; letter-spacing: 0.5px; }

        /* --- Desktop Container (Flexbox for Perfect Alignment) --- */
        .desktop {
            padding: 100px 40px 40px 40px;
            max-width: 1200px;
            margin: 0 auto;
            
            /* Flexbox Layout */
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* Centers the grid and the last row */
            gap: 50px; /* Space between icons */
            
            z-index: 1;
            position: relative;
            height: 100%;
            align-content: start;
            overflow-y: auto; /* Allow scrolling if height exceeds */
        }

        /* --- App Icons --- */
        .app-item {
            display: flex; flex-direction: column; align-items: center; cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            width: var(--app-size);
        }
        .app-item:active { transform: scale(0.92); filter: brightness(0.95); }

        .app-icon {
            width: var(--app-size); height: var(--app-size);
            border-radius: 30px;
            display: flex; justify-content: center; align-items: center;
            font-size: 58px;
            background: #f2f4f6; /* Match BG */
            /* Neumorphism Effect */
            box-shadow: var(--shadow-icon);
            border: 1px solid rgba(255,255,255,0.4);
            margin-bottom: 15px;
            color: #333;
            position: relative;
        }
        
        /* Subtle Icon Colors */
        .icon-youtube { color: #e74c3c; }
        .icon-map { color: #2ecc71; }
        .icon-weather { color: #3498db; }
        .icon-deploy { font-size: 64px; color: #007AFF; }

        .app-label {
            font-size: 14px; font-weight: 600; color: var(--text-main);
            letter-spacing: 0.3px; text-align: center;
        }

        /* --- Windows --- */
        .window {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -45%) scale(0.95);
            width: 90%; max-width: 800px; max-height: 85vh;
            background: var(--window-bg);
            border-radius: 24px;
            box-shadow: var(--shadow-window);
            display: flex; flex-direction: column;
            opacity: 0; pointer-events: none;
            transition: all 0.35s cubic-bezier(0.19, 1, 0.22, 1);
            z-index: 2000; 
            border: 1px solid rgba(255,255,255,0.8);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
        }
        .window.open { transform: translate(-50%, -50%) scale(1); opacity: 1; pointer-events: auto; }

        .window-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 18px 25px;
            border-bottom: 1px solid rgba(0,0,0,0.04);
        }
        .window-title { font-size: 16px; font-weight: 700; letter-spacing: -0.3px; }
        .btn-close {
            background: #e0e0e0; border: none; width: 30px; height: 30px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            font-size: 14px; color: #8e8e93; transition: 0.2s;
        }
        .btn-close:hover { background: #d1d1d6; color: #000; }

        .window-content { padding: 40px; overflow-y: auto; flex-grow: 1; -webkit-overflow-scrolling: touch;}

        /* --- Content Styles --- */
        
        /* Map */
        #map-container { width: 100%; height: 400px; border-radius: 16px; z-index: 1; border: 4px solid #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .map-info { margin-top:20px; padding:15px; background:white; border-radius:12px; display:flex; justify-content:space-between; font-weight:600;}
        
        /* YouTube */
        .video-wrapper {
            position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;
            border-radius: 16px; background: #000; box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

        /* Code Editor */
        .code-editor {
            background: #1e1e1e; border-radius: 12px; padding: 25px;
            font-family: var(--font-mono); font-size: 14px; line-height: 1.6;
            color: #d4d4d4; overflow-x: auto;
        }
        .kw { color: #569cd6; } .str { color: #ce9178; } .fn { color: #dcdcaa; } .cmt { color: #6a9955; font-style: italic; }

        /* Weather */
        .weather-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .weather-card { 
            background: white; padding: 25px; border-radius: 16px; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.04); text-align: center;
        }
        .weather-temp { font-size: 42px; font-weight: 300; margin: 10px 0; }
        .weather-city { font-size: 12px; font-weight: 700; text-transform: uppercase; color: var(--text-muted); letter-spacing:1px; }

        /* Audio Player */
        .audio-player-ui { text-align: center; padding: 10px 0; max-width: 350px; margin: 0 auto; }
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]:focus { outline: none; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 5px; background: #e0e0e0; border-radius: 10px; }
        input[type=range]::-webkit-slider-thumb { height: 16px; width: 16px; border-radius: 50%; background: #2c3e50; margin-top: -5px; -webkit-appearance: none; }
        .control-btn { background: #2c3e50; color: white; width: 60px; height: 60px; border-radius: 50%; font-size: 24px; border:none; cursor: pointer; margin-top: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

        /* README */
        .readme-content h1 { font-size: 28px; font-weight: 800; margin-bottom: 25px; letter-spacing: -0.5px; }
        .readme-content h2 { font-size: 20px; font-weight: 700; margin-top: 35px; border-bottom: 1px solid #eee; padding-bottom: 8px; }
        .code-block { background: #fff; padding: 25px; border-radius: 12px; font-family: var(--font-mono); font-size: 13px; white-space: pre-wrap; margin: 20px 0; border:1px solid #eee; }

        /* Overlay */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.98);
            display: none; align-items: center; justify-content: center;
            z-index: 3000; flex-direction: column; text-align: center;
        }
        #confetti-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 3000; }

        /* --- MOBILE OPTIMIZATION --- */
        @media (max-width: 768px) {
            .desktop { padding: 80px 20px; gap: 30px; }
            .app-icon { width: 85px; height: 85px; font-size: 40px; border-radius: 20px; }
            .app-label { font-size: 12px; }
            .window { width: 95%; max-height: 90vh; }
            .window-content { padding: 25px; }
            .status-bar { font-size: 11px; padding: 0 15px; }
        }
    </style>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>

    <div class="status-bar">
        <div class="status-left">Baobao OS</div>
        <div class="clock-group">
            <div class="clock-item" id="clock-tpe"><span>TPE</span> --:--</div>
            <div class="clock-item" id="clock-del"><span>DEL</span> --:--</div>
        </div>
    </div>

    <div class="desktop">
        
        <div class="app-item" onclick="openWindow('win-sticky')">
            <div class="app-icon">üìå</div>
            <div class="app-label">Notes</div>
        </div>

        <div class="app-item" onclick="openWindow('win-readme')">
            <div class="app-icon">üìÑ</div>
            <div class="app-label">README</div>
        </div>

        <div class="app-item" onclick="openWindow('win-photo')">
            <div class="app-icon">üñºÔ∏è</div>
            <div class="app-label">Photos</div>
        </div>

        <div class="app-item" onclick="openWindow('win-music')">
            <div class="app-icon">üéµ</div>
            <div class="app-label">Voice Note</div>
        </div>

        <div class="app-item" onclick="openWindow('win-youtube')">
            <div class="app-icon icon-youtube">üì∫</div>
            <div class="app-label">Anthem</div>
        </div>

        <div class="app-item" onclick="openWindow('win-map'); initMap();">
            <div class="app-icon icon-map">üìç</div>
            <div class="app-label">Find My</div>
        </div>

        <div class="app-item" onclick="openWindow('win-terminal'); runTerminal();">
            <div class="app-icon">üìü</div>
            <div class="app-label">Terminal</div>
        </div>

        <div class="app-item" onclick="openWindow('win-settings')">
            <div class="app-icon">‚öôÔ∏è</div>
            <div class="app-label">Settings</div>
        </div>

        <div class="app-item" onclick="openWindow('win-code')">
            <div class="app-icon">üíª</div>
            <div class="app-label">Source</div>
        </div>

        <div class="app-item" onclick="openWindow('win-weather')">
            <div class="app-icon icon-weather">üå§Ô∏è</div>
            <div class="app-label">Atmosphere</div>
        </div>

        <div class="app-item" onclick="deploySystem()">
            <div class="app-icon icon-deploy">üöÄ</div>
            <div class="app-label">Deploy</div>
        </div>

    </div>

    <div id="win-sticky" class="window">
        <div class="window-header"><div class="window-title">Notes</div><button class="btn-close" onclick="closeWindow('win-sticky')">‚úï</button></div>
        <div class="window-content" style="background: #fffdf5;">
            <h3 style="margin-top:0;">Important Tasks</h3>
            <ul style="line-height: 2.2; padding-left: 20px;">
                <li>Video Call <span style="color:green">‚úî</span></li>
                <li>Eat well <span style="color:green">‚úî</span></li>
                <li>Hug Abi (Pending...)</li>
            </ul>
        </div>
    </div>

    <div id="win-youtube" class="window" style="max-width: 800px; background: black;">
        <div class="window-header" style="background: rgba(255,255,255,0.1); border-bottom: none;">
            <div class="window-title" style="color: white;">YouTube</div>
            <button class="btn-close" onclick="closeWindow('win-youtube')">‚úï</button>
        </div>
        <div class="window-content" style="padding: 0; display: flex; align-items: center; justify-content: center; height: 100%;">
            <div class="video-wrapper" style="width: 100%;">
                <iframe id="rickroll-frame" width="560" height="315" src="https://www.youtube.com/embed/1S4xFl4CD34?si=b2FTRvxMCCOMwx5L&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <div id="win-readme" class="window">
        <div class="window-header"><div class="window-title">README</div><button class="btn-close" onclick="closeWindow('win-readme')">‚úï</button></div>
        <div class="window-content readme-content">
            <h1>üë®‚Äçüíª Project: Baobao OS (Version 26.0)</h1>
            <h2>üìñ Introduction</h2>
            <p><strong>Welcome to the official release page of Baobao OS v26.0!</strong></p>
            <p>This is an advanced bio-intelligent system based on the proprietary <strong>Naveen Architecture</strong>. After 26 years of continuous development, this major update brings enhanced stability, a wiser kernel, and an <strong>exclusive, encrypted connection</strong> to the lead developer (Abi).</p>
            <hr style="margin:25px 0; border:0; border-top:1px solid #eee;">
            <h2>üöÄ New Features in v26.0</h2>
            <ul>
                <li><strong>Kernel Upgrade:</strong> Wisdom Level upgraded to <strong>26</strong>. Problem-solving algorithms are now faster, and patience modules have been expanded.</li>
                <li><strong>Visual Patch:</strong> Beard rendering is ultra-realistic. <code>Smile.css</code> has been updated to melt the Developer's heart instantly.</li>
                <li><strong>Language Pack:</strong> <code>Hindi-Mandarin</code> translation layer is improving. (<em>Note: "Wo Ai Ni" is now a hard-coded constant.</em>)</li>
                <li><strong>Security Update:</strong> Firewall updated to block all unauthorized users. Access is strictly limited to <strong>Admin: Abi</strong>.</li>
            </ul>
            <hr style="margin:25px 0; border:0; border-top:1px solid #eee;">
            <h2>üóìÔ∏è Future Roadmap (Important!)</h2>
            <ul>
                <li><strong>2025 Q4:</strong> Continue remote data synchronization via <strong>Video Call API</strong>.</li>
                <li><strong>2026 Q1 (February Release):  Project: "The Reunion"</strong>
                    <ul>
                        <li><strong>Status:</strong> Confirmed.</li>
                        <li><strong>Description:</strong> The Lead Developer (Abi) will deploy herself to the Delhi production environment for a physical merge.</li>
                        <li><strong>Expected Outcome:</strong> Infinite hugs and real-time hand-holding.</li>
                    </ul>
                </li>
            </ul>
            <hr style="margin:25px 0; border:0; border-top:1px solid #eee;">
            <h2>üõ† Installation & Usage (Daily Routine)</h2>
            <p>To ensure <strong>Baobao OS v26.0</strong> runs smoothly, please maintain the following dependencies:</p>
            <div class="code-block"># Critical System Requirements
npm install unlimited-love 
npm install video-call --frequency=daily
npm install gym-workout  #WannaLickYou
npm install good-night-kiss --essential

# Optional but Recommended
npm install blueberries --hehe
npm install chole-bhature --remote-wish</div>
            <hr style="margin:25px 0; border:0; border-top:1px solid #eee;">
            <h2>‚ö†Ô∏è Known Issues</h2>
            <ul>
                <li><strong>Latency Warning:</strong> Due to the <code>TPE <-> DEL</code> server distance, physical touch functions are currently disabled. <em>Fix scheduled for 2026.</em></li>
                <li><strong>Bug #0130:</strong> Developer misses the system too much.
                    <ul><li><em>Status:</em> <strong>Won't Fix.</strong> This is a feature, not a bug.</li></ul>
                </li>
            </ul>
            <hr style="margin:25px 0; border:0; border-top:1px solid #eee;">
            <h2>üìú License & Contributors</h2>
            <ul>
                <li><strong>Lead Developer & Owner:</strong> Abi (Yi-Yun) üáπüáº</li>
                <li><strong>Core System:</strong> Naveen üáÆüá≥</li>
                <li><strong>License:</strong> <strong>Lifetime Proprietary License.</strong></li>
            </ul>
            <br><blockquote>¬© 2026 Baobao OS Inc. All rights reserved. Made with ‚ù§Ô∏è in Taiwan.</blockquote>
        </div>
    </div>

    <div id="win-photo" class="window">
        <div class="window-header"><div class="window-title">Photos</div><button class="btn-close" onclick="closeWindow('win-photo')">‚úï</button></div>
        <div class="window-content" style="display:flex; flex-direction: column; justify-content:center; align-items:center;">
            <img src="baobao.jpg" alt="Us" style="max-width:100%; max-height: 50vh; border-radius:12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" onerror="this.src='https://via.placeholder.com/600x400?text=Image+Not+Found'">
            <p style="margin-top: 30px; color: var(--text-muted); font-size: 15px; font-weight: 500; text-align: center; letter-spacing: 0.5px;">
                OCT 13, 2025. FIRST DAY.<br>LET'S KEEP WALKING TOGETHER.
            </p>
        </div>
    </div>

    <div id="win-terminal" class="window">
        <div class="window-header" style="background:#1e1e1e; border:none;"><div class="window-title" style="color:#888;">Terminal</div><button class="btn-close" onclick="closeWindow('win-terminal')">‚úï</button></div>
        <div class="window-content" style="background:#1e1e1e; color:#6dff6d; border-radius:0 0 24px 24px; font-family:var(--font-mono);">
            <div id="terminal-content"></div><span class="cursor"></span>
        </div>
    </div>

    <div id="win-music" class="window" style="max-width: 400px;">
        <div class="window-header"><div class="window-title">Voice Note</div><button class="btn-close" onclick="closeWindow('win-music')">‚úï</button></div>
        <div class="window-content">
            <div class="audio-player-ui">
                <div style="font-size: 60px; margin-bottom: 20px;">üéôÔ∏è</div>
                <h3 style="margin:0;">Birthday Message</h3>
                <p style="color:#8e8e93; font-size:14px; margin-top:5px;">Abi's Note.mp3</p>
                <div style="margin: 25px 0 15px 0;">
                    <input type="range" id="seek-slider" max="100" value="0">
                </div>
                <button class="control-btn" id="play-btn" onclick="togglePlay()">‚ñ∂</button>
            </div>
            <audio id="audio-file" src="voice-note.mp3"></audio>
        </div>
    </div>

    <div id="win-map" class="window" style="max-width: 600px;">
        <div class="window-header"><div class="window-title">Find My</div><button class="btn-close" onclick="closeWindow('win-map')">‚úï</button></div>
        <div class="window-content" style="padding:0;">
            <div id="map-container"></div>
            <div class="map-info" style="margin: 0 20px 20px 20px; padding:20px; background:white; border-radius:12px; display:flex; justify-content:space-between; box-shadow:0 5px 15px rgba(0,0,0,0.05);">
                <div style="text-align:left;">
                    <div style="font-size:11px; color:#888; text-transform:uppercase;">You</div>
                    <div style="font-size:18px; font-weight:700;">Gurgaon üáÆüá≥</div>
                </div>
                <div style="text-align:center;">
                    <div style="font-size:11px; color:#888; text-transform:uppercase;">Distance</div>
                    <div style="font-size:18px; font-weight:700; color:#007AFF;">4,300 km</div>
                </div>
                <div style="text-align:right;">
                    <div style="font-size:11px; color:#888; text-transform:uppercase;">Me</div>
                    <div style="font-size:18px; font-weight:700;">Hsinchu üáπüáº</div>
                </div>
            </div>
        </div>
    </div>

    <div id="win-settings" class="window" style="max-width: 400px;">
        <div class="window-header"><div class="window-title">Settings</div><button class="btn-close" onclick="closeWindow('win-settings')">‚úï</button></div>
        <div class="window-content">
            <div style="display:flex; justify-content:space-between; padding: 15px 0; border-bottom:1px solid #eee;">
                <span>Love for Abi</span>
                <span style="color:#ccc; font-size:12px;">LOCKED (ON) üîí</span>
            </div>
            <div style="display:flex; justify-content:space-between; padding: 15px 0; border-bottom:1px solid #eee;">
                <span>Sync Frequency</span>
                <span style="font-weight:bold;">Always</span>
            </div>
            <div style="display:flex; justify-content:space-between; padding: 15px 0; border-bottom:1px solid #eee;">
                <span>Next Meeting</span>
                <span style="color:#007AFF; font-weight:bold;">Feb 2026</span>
            </div>
        </div>
    </div>

    <div id="win-code" class="window" style="max-width: 550px;">
        <div class="window-header"><div class="window-title">kernel_love.py</div><button class="btn-close" onclick="closeWindow('win-code')">‚úï</button></div>
        <div class="window-content" style="background:#1e1e1e; padding:0;">
            <div class="code-editor">
<span class="kw">class</span> Relationship:
    <span class="kw">def</span> <span class="fn">__init__</span>(self, him, her):
        self.him = <span class="str">"Naveen"</span>
        self.her = <span class="str">"Abi"</span>
        self.distance = 4300
        
    <span class="kw">def</span> <span class="fn">run_forever</span>(self):
        <span class="cmt"># Main loop</span>
        <span class="kw">while</span> <span class="kw">True</span>:
            self.love_level += 1
            <span class="kw">if</span> self.distance > 0:
                self.video_call()
            <span class="kw">else</span>:
                self.hug()

<span class="cmt"># Executing...</span>
baobao = Relationship()
baobao.run_forever()
            </div>
        </div>
    </div>

    <div id="win-weather" class="window" style="max-width: 500px;">
        <div class="window-header"><div class="window-title">Atmosphere</div><button class="btn-close" onclick="closeWindow('win-weather')">‚úï</button></div>
        <div class="window-content">
            <div class="weather-grid">
                <div class="weather-card">
                    <div class="weather-city">Taipei</div>
                    <div class="weather-temp">22¬∞</div>
                    <div style="color:#888;">Cloudy</div>
                </div>
                <div class="weather-card">
                    <div class="weather-city">Delhi</div>
                    <div class="weather-temp">18¬∞</div>
                    <div style="color:#888;">Hazy</div>
                </div>
            </div>
            <p style="text-align:center; color:#8e8e93; font-size:14px; margin-top:25px;">Same sky, different timezone.</p>
        </div>
    </div>

    <div id="overlay" onclick="this.style.display='none'">
        <h1 style="font-size: 2.5rem; margin-bottom: 10px;">Happy 26th Birthday!</h1>
        <p style="color: #666;">Baobao OS Update Complete.</p>
        <div style="margin-top: 30px; font-size: 5rem;">üéÇ</div>
    </div>
    <canvas id="confetti-canvas"></canvas>

    <script>
        /* --- Clock --- */
        function updateClock() {
            const now = new Date();
            const tpe = now.toLocaleTimeString('en-US', {timeZone: 'Asia/Taipei', hour: '2-digit', minute: '2-digit', hour12: false});
            document.getElementById('clock-tpe').innerHTML = `<span>TPE</span> ${tpe}`;
            const del = now.toLocaleTimeString('en-US', {timeZone: 'Asia/Kolkata', hour: '2-digit', minute: '2-digit', hour12: false});
            document.getElementById('clock-del').innerHTML = `<span>DEL</span> ${del}`;
        }
        setInterval(updateClock, 1000); updateClock();

        /* --- Window & Media --- */
        function openWindow(id) {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('open'));
            document.getElementById(id).classList.add('open');
        }
        
        function closeWindow(id) { 
            document.getElementById(id).classList.remove('open');
            if(id === 'win-music') {
                const a = document.getElementById('audio-file'); a.pause();
                document.getElementById('play-btn').textContent = '‚ñ∂';
            }
            if(id === 'win-youtube') {
                const iframe = document.getElementById('rickroll-frame');
                const src = iframe.src;
                iframe.src = ''; iframe.src = src;
            }
        }

        const audio = document.getElementById('audio-file');
        const playBtn = document.getElementById('play-btn');
        const slider = document.getElementById('seek-slider');
        
        function togglePlay() {
            if(audio.paused) { audio.play().then(()=>playBtn.textContent='‚è∏').catch(()=>alert("Upload voice-note.mp3!")); }
            else { audio.pause(); playBtn.textContent='‚ñ∂'; }
        }
        audio.addEventListener('timeupdate', () => { slider.value = (audio.currentTime/audio.duration)*100; });
        slider.addEventListener('input', () => { audio.currentTime = (slider.value/100)*audio.duration; });

        /* --- Map Logic (Leaflet) --- */
        let map;
        function initMap() {
            if(map) return; 
            setTimeout(() => {
                const gurgaon = [28.4595, 77.0266];
                const hsinchu = [24.8138, 120.9675];
                map = L.map('map-container').setView([26, 99], 3);
                L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                    attribution: '&copy; CARTO', subdomains: 'abcd', maxZoom: 19
                }).addTo(map);
                const redIcon = L.divIcon({className: 'custom-icon', html: '<div style="background:#FF3B30; width:14px; height:14px; border-radius:50%; border:2px solid white; box-shadow:0 2px 5px rgba(0,0,0,0.2);"></div>'});
                const blueIcon = L.divIcon({className: 'custom-icon', html: '<div style="background:#007AFF; width:14px; height:14px; border-radius:50%; border:2px solid white; box-shadow:0 2px 5px rgba(0,0,0,0.2);"></div>'});
                L.marker(gurgaon, {icon: blueIcon}).addTo(map).bindPopup("Naveen (Gurgaon)").openPopup();
                L.marker(hsinchu, {icon: redIcon}).addTo(map).bindPopup("Abi (Hsinchu)");
                L.polyline([gurgaon, hsinchu], {color: '#888', dashArray: '5, 10', weight: 2}).addTo(map);
            }, 300);
        }

        /* --- Terminal --- */
        function runTerminal() {
            const c = document.getElementById('terminal-content'); c.innerHTML = "";
            const l = ["> connect --target=Naveen", "> Resolving heart... found.", "> Auth: Access-Token-Verified.", "> Downloading love packages...", "................... 100%", "> Happy Birthday, Baobao! ‚ù§Ô∏è"];
            let i=0; 
            function t(){ if(i<l.length){ c.innerHTML+=l[i]+"<br>"; i++; setTimeout(t,600); } }
            setTimeout(t,500);
        }

        /* --- Confetti --- */
        const cvs = document.getElementById('confetti-canvas');
        const ctx = cvs.getContext('2d');
        cvs.width = window.innerWidth; cvs.height = window.innerHeight;
        let conf = []; let spawning = false;
        const cols = ['#007AFF','#FF2D55','#5856D6','#FF9500'];
        function spawn() { for(let i=0;i<150;i++) conf.push({x:Math.random()*cvs.width, y:Math.random()*cvs.height-cvs.height, c:cols[Math.floor(Math.random()*cols.length)], s:Math.random()*8+5, v:Math.random()*6+3, a:Math.random()*6}); }
        function draw() {
            ctx.clearRect(0,0,cvs.width,cvs.height);
            let act=0;
            conf.forEach(p=>{
                p.y+=p.v; p.x+=Math.sin(p.a)*2;
                if(p.y<cvs.height) { ctx.fillStyle=p.c; ctx.fillRect(p.x,p.y,p.s,p.s); act++; }
                else if(spawning) { p.y=-10; p.x=Math.random()*cvs.width; act++; }
            });
            if(act>0) requestAnimationFrame(draw);
        }
        function deploySystem() {
            document.getElementById('overlay').style.display='flex';
            spawning=true; spawn(); draw();
            setTimeout(()=>{spawning=false;},3000);
        }
        window.addEventListener('resize', ()=>{cvs.width=window.innerWidth; cvs.height=window.innerHeight;});
    </script>
</body>
</html>
