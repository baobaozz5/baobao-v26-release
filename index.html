<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Baobao OS v26.0</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÇ</text></svg>">
    <meta property="og:title" content="Baobao OS v26.0 üéÇ">
    <meta property="og:description" content="Happy 26th Birthday, Naveen Sir! Access Granted.">
    <meta property="og:image" content="baobao.jpg">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&family=Pacifico&family=Nunito:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <style>
        :root {
            --bg-color: #f2f4f6; --text-main: #2c3e50; --text-muted: #95a5a6;
            --window-bg: rgba(255, 255, 255, 0.96); --icon-bg: #f2f4f6; --border-color: rgba(255,255,255,0.4);
            --shadow-icon: 12px 12px 24px rgba(163, 177, 198, 0.5), -12px -12px 24px rgba(255, 255, 255, 0.9);
            --shadow-window: 0 40px 100px rgba(0,0,0,0.15);
            --status-bar-bg: rgba(242, 244, 246, 0.85); --accent-color: #007AFF; --map-filter: none;
            --app-size: 125px; 
            
            /* FONT CHANGED TO PUBLIC SANS */
            --font-main: 'Public Sans', sans-serif; 
            
            --font-mono: 'JetBrains Mono', 'SF Mono', monospace;
            --font-script: 'Pacifico', cursive;
            --tinder-grad: linear-gradient(to right, #fd297b, #ff655b); --tinder-green: #2ee681; --tinder-red: #ec4768;
        }
        [data-theme="dark"] {
            --bg-color: #1a1a1a; --text-main: #f0f0f0; --text-muted: #888;
            --window-bg: rgba(40, 40, 40, 0.96); --icon-bg: #2a2a2a; --border-color: rgba(255,255,255,0.05);
            --shadow-icon: 8px 8px 16px rgba(0,0,0,0.4), -4px -4px 12px rgba(255,255,255,0.05);
            --shadow-window: 0 40px 100px rgba(0,0,0,0.5);
            --status-bar-bg: rgba(26, 26, 26, 0.85); --accent-color: #0A84FF;
            --map-filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; background-color: var(--bg-color); color: var(--text-main); font-family: var(--font-main); height: 100vh; width: 100vw; overflow: hidden; user-select: none; }

        .status-bar { position: fixed; top: 0; left: 0; width: 100%; height: 48px; display: flex; justify-content: space-between; align-items: center; padding: 0 25px; font-size: 14px; font-weight: 60[...]
        .status-left { letter-spacing: 0.5px; text-transform: uppercase; font-size: 13px; color: var(--text-muted); font-weight: 700; }
        .clock-group { display: flex; gap: 30px; } .clock-item { font-size: 15px; font-weight: 700; } .clock-item span { color: var(--text-muted); margin-right: 8px; font-weight: 600; font-size: 12px;[...]

        .desktop { padding: 100px 40px 40px 40px; max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: center; gap: 50px; z-index: 1; position: relative; height: 100%; a[...]
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1); width: var(--app-size); } .app-item:activ[...]
        .app-icon { width: var(--app-size); height: var(--app-size); border-radius: 30px; display: flex; justify-content: center; align-items: center; font-size: 58px; background: var(--icon-bg); box-[...]
        
        .icon-youtube { color: #e74c3c; } .icon-map { color: #2ecc71; } .icon-sound { color: #FF9500; } .icon-deploy { font-size: 64px; color: var(--accent-color); } .icon-letter { background: var(--t[...]
        .app-label { font-size: 14px; font-weight: 600; color: var(--text-main); letter-spacing: 0.3px; text-align: center; }

        .window { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -45%) scale(0.95); width: 90%; max-width: 800px; max-height: 85vh; background: var(--window-bg); border-radius: 24px;[...]
        .window.open { transform: translate(-50%, -50%) scale(1); opacity: 1; pointer-events: auto; }
        .window-header { display: flex; justify-content: space-between; align-items: center; padding: 18px 25px; border-bottom: 1px solid var(--border-color); flex-shrink: 0;}
        .window-title { font-size: 16px; font-weight: 700; letter-spacing: -0.3px; color: var(--text-main); }
        .btn-close { background: rgba(0,0,0,0.05); border: none; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size:[...]
        .window-content { padding: 40px; overflow-y: auto; flex-grow: 1; -webkit-overflow-scrolling: touch; position: relative; touch-action: pan-y; overscroll-behavior: contain;}

        /* Soundboard */
        .sound-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        .sound-btn { background: var(--icon-bg); border: 2px solid var(--border-color); border-radius: 16px; padding: 25px 10px; cursor: pointer; font-size: 15px; font-weight: 700; color: var(--text-m[...]
        .sound-btn:active { transform: scale(0.96); background: var(--accent-color); color: white; border-color: var(--accent-color); }
        .sound-btn span { font-size: 24px; }
        .sound-alert { text-align:center; color: #FF3B30; font-size:12px; margin-bottom:20px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

        /* Tinder */
        .tinder-container { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding-bottom: 20px; }
        .tinder-card-wrap { flex-grow: 1; width: 100%; max-width: 380px; position: relative; perspective: 1000px; cursor: grab; touch-action: none; }
        .tinder-card-wrap:active { cursor: grabbing; }
        .tinder-card { width: 100%; height: 100%; background: #fff; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.15); position: absolute; top: 0; left: 0; background-siz[...]
        .tinder-overlay { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); padding: 80px 20px 20px 20px; color: white; }
        .tinder-name { font-size: 28px; font-weight: 800; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .tinder-actions { display: flex; gap: 30px; margin-top: 25px; z-index: 5; }
        .tinder-btn { width: 65px; height: 65px; border-radius: 50%; border: none; background: #fff; box-shadow: 0 10px 20px rgba(0,0,0,0.1); font-size: 28px; cursor: pointer; transition: 0.2s; displa[...]
        .tinder-btn:hover { transform: scale(1.1); }
        .tinder-btn.nope { color: var(--tinder-red); } .tinder-btn.like { color: var(--tinder-green); font-size: 34px; }
        .tinder-match { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); z-index: 10; display: flex; flex-direction: column; align-items: center; justify-conten[...]
        .tinder-match.active { opacity: 1; pointer-events: auto; }
        .match-title { font-family: var(--font-script); font-size: 65px; margin-bottom: 40px; background: var(--tinder-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filte[...]
        .match-photos { display: flex; justify-content: center; align-items: center; margin-bottom: 50px; }
        .match-img { width: 130px; height: 130px; border-radius: 50%; border: 4px solid white; object-fit: cover; margin: 0 -20px; box-shadow: 0 10px 30px rgba(0,0,0,0.4); background: #eee;}
        .tinder-chat { position: absolute; top:0; left:0; width:100%; height:100%; background: var(--window-bg); z-index: 20; display: flex; flex-direction: column; opacity: 0; pointer-events: none; t[...]
        .tinder-chat.active { opacity: 1; pointer-events: auto; transform: translateY(0); }
        .chat-header { padding: 15px; border-bottom: 1px solid var(--border-color); font-weight: 700; text-align: center; color: var(--text-main); font-size: 16px; background: rgba(255,255,255,0.5); b[...]
        .chat-body { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .chat-bubble { background: #e5e5ea; padding: 12px 18px; border-radius: 20px; border-bottom-left-radius: 4px; max-width: 80%; font-size: 15px; color: black; align-self: flex-start; line-height:[...]
        .chat-bubble.me { background: var(--accent-color); color: white; align-self: flex-end; border-bottom-left-radius: 20px; border-bottom-right-radius: 4px; }
        .chat-system { text-align: center; color: var(--text-muted); font-size: 12px; margin: 20px 0; clear: both; text-transform: uppercase; letter-spacing: 1px; font-weight: 600;}
        .chat-input-area { padding: 15px; border-top: 1px solid var(--border-color); display: flex; gap: 10px; background: var(--window-bg);}
        .chat-input { flex-grow: 1; border: 1px solid var(--border-color); border-radius: 25px; padding: 12px 20px; outline: none; background: var(--icon-bg); color: var(--text-main); font-size: 15px;[...]
        .chat-send { background: var(--tinder-grad); border: none; color: white; padding: 0 25px; border-radius: 25px; font-weight: 600; cursor: pointer; transition: 0.2s; font-size: 15px;}
        .chat-send:hover { opacity: 0.9; }

        /* swipe hint */
        .swipe-hint {
          position: absolute;
          top: 18px;
          right: 18px;
          background: rgba(0,0,0,0.5);
          color: white;
          padding: 8px 12px;
          border-radius: 20px;
          font-weight: 700;
          font-size: 14px;
          z-index: 6;
          pointer-events: none;
          opacity: 0.95;
          transform: translateY(0);
          transition: opacity 0.25s ease, transform 0.25s ease;
        }
        .swipe-hint.hidden { opacity: 0; transform: translateY(-10px); }

        /* Overlay */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.98);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 10000; /* Ensure Top */
            opacity: 0; visibility: hidden; 
            transition: opacity 0.5s ease, visibility 0.5s;
            text-align: center; cursor: pointer;
        }
        [data-theme="dark"] #overlay { background: rgba(0, 0, 0, 0.98); }
        #overlay.show { opacity: 1; visibility: visible; }
        #overlay h1 { font-size: 3rem; margin-bottom: 20px; color: #333; font-weight: 800; letter-spacing: -1px; animation: slideUp 0.8s ease; }
        [data-theme="dark"] #overlay h1 { color: #fff; }
        #overlay p { color: #666; font-size: 1.2rem; margin-bottom: 30px; }
        [data-theme="dark"] #overlay p { color: #aaa; }
        @keyframes slideUp { 0% { transform: translateY(20px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
        #confetti-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 10001; }

        /* Helpers */
        .video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 16px; background: #000; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        .code-container { background: #1e1e1e; border-radius: 12px; overflow: hidden; font-family: 'SF Mono', 'Menlo', monospace; font-size: 14px; line-height: 1.6; display: flex; } .line-numbers { ba[...]
        .monitor-row { margin-bottom: 25px; } .monitor-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; font-weight: 600; color: var(--text-main); } .monitor[...]
        .audio-player-ui { text-align: center; padding: 10px 0; max-width: 350px; margin: 0 auto; color: var(--text-main); } input[type=range] { -webkit-appearance: none; width: 100%; background: tran[...]
        .toggle-switch { width: 50px; height: 28px; background: var(--text-muted); border-radius: 30px; position: relative; cursor: pointer; transition: 0.3s; } .toggle-knob { width: 24px; height: 24p[...]
        .readme-content h1 { font-size: 28px; font-weight: 800; margin-bottom: 25px; letter-spacing: -0.5px; color: var(--text-main); } .readme-content h2 { font-size: 20px; font-weight: 700; margin-t[...]

        @media (max-width: 768px) {
            .desktop { padding: 80px 20px; gap: 30px; }
            .app-icon { width: 85px; height: 85px; font-size: 40px; border-radius: 20px; }
            .app-label { font-size: 12px; }
            .window { width: 95%; max-height: 90vh; }
            .window-content { padding: 25px; }
            .status-bar { font-size: 12px; padding: 0 15px; }
            .match-title { font-size: 48px; } .match-img { width: 100px; height: 100px; }
            .tinder-card { box-shadow: 0 8px 20px rgba(0,0,0,0.12); }
        }
    </style>
</head>
<body>

    <div class="status-bar">
        <div class="status-left">Baobao OS v26.0</div>
        <div class="clock-group">
            <div class="clock-item" id="clock-tpe"><span>TPE</span> --:--</div>
            <div class="clock-item" id="clock-del"><span>DEL</span> --:--</div>
        </div>
    </div>

    <div class="desktop">
        <div class="app-item" onclick="openWindow('win-sticky')"><div class="app-icon">üìå</div><div class="app-label">Notes</div></div>
        <div class="app-item" onclick="openWindow('win-readme')"><div class="app-icon">üìÑ</div><div class="app-label">README</div></div>
        <div class="app-item" onclick="openWindow('win-photo')"><div class="app-icon">üñºÔ∏è</div><div class="app-label">Photo</div></div>
        <div class="app-item" onclick="openWindow('win-music')"><div class="app-icon">üéµ</div><div class="app-label">Voice Note</div></div>
        <div class="app-item" onclick="openWindow('win-youtube')"><div class="app-icon icon-youtube">üì∫</div><div class="app-label">Anthem</div></div>
        <div class="app-item" onclick="openWindow('win-monitor'); startMonitor();"><div class="app-icon icon-sys">üìä</div><div class="app-label">Activity</div></div>
        <div class="app-item" onclick="openWindow('win-terminal'); focusTerminal();"><div class="app-icon">üìü</div><div class="app-label">Terminal</div></div>
        <div class="app-item" onclick="openWindow('win-settings')"><div class="app-icon">‚öôÔ∏è</div><div class="app-label">Settings</div></div>
        <div class="app-item" onclick="openWindow('win-code')"><div class="app-icon">üíª</div><div class="app-label">Source</div></div>
        <div class="app-item" onclick="openWindow('win-sound')"><div class="app-icon icon-sound">üéπ</div><div class="app-label">Soundboard</div></div>
        <div class="app-item" onclick="openWindow('win-tinder'); startTinder();"><div class="app-icon icon-letter">üî•</div><div class="app-label">Matches</div></div>
        <div class="app-item" onclick="deploySystem()"><div class="app-icon icon-deploy">üöÄ</div><div class="app-label">Deploy</div></div>
    </div>

    <div id="win-sticky" class="window"><div class="window-header"><div class="window-title">Notes</div><button class="btn-close" onclick="closeWindow('win-sticky')">‚úï</button></div><div class="wind[...]
    
    <div id="win-youtube" class="window" style="max-width: 800px; background: black;"><div class="window-header" style="background: rgba(255,255,255,0.1); border-bottom: none;"><div class="window-titl[...]

    <div id="win-readme" class="window"><div class="window-header"><div class="window-title">README</div><button class="btn-close" onclick="closeWindow('win-readme')">‚úï</button></div><div class="win[...]
npm install unlimited-love 
npm install hard-dih --essential
npm install video-call --frequency=daily
npm install tongue --wannalickyou
npm install gym-workout  --sweatybabe
        
# Optional but Recommended
npm install blueberries 
npm install chole-bhature --remote-wish</div><hr style="margin:25px 0; border:0; border-top:1px solid var(--border-color);"><h2>‚ö†Ô∏è Known Issues</h2><ul><li><strong>Latency Warning:</strong> Due to[...]

    <div id="win-photo" class="window"><div class="window-header"><div class="window-title">Photos</div><button class="btn-close" onclick="closeWindow('win-photo')">‚úï</button></div><div class="windo[...]

    <div id="win-terminal" class="window"><div class="window-header" style="background:#1e1e1e; border:none;"><div class="window-title" style="color:#888;">Terminal</div><button class="btn-close" oncl[...]

    <div id="win-music" class="window" style="max-width: 400px;"><div class="window-header"><div class="window-title">Voice Note</div><button class="btn-close" onclick="closeWindow('win-music')">‚úï</[...]

    <div id="win-monitor" class="window" style="max-width: 500px;"><div class="window-header"><div class="window-title">Activity Monitor</div><button class="btn-close" onclick="closeWindow('win-monito[...]

    <div id="win-settings" class="window" style="max-width: 400px;"><div class="window-header"><div class="window-title">Settings</div><button class="btn-close" onclick="closeWindow('win-settings')">ÔøΩ[...]

    <div id="win-code" class="window" style="max-width: 600px;"><div class="window-header"><div class="window-title">kernel_love.cpp</div><button class="btn-close" onclick="closeWindow('win-code')">ÔøΩÔøΩ[...]
<span class="kw">#include</span> <span class="str"><string></span>

<span class="kw">using namespace</span> std;

<span class="kw">class</span> <span class="type">Relationship</span> {
<span class="kw">public</span>:
    string him;
    string her;
    <span class="kw">int</span> distance_km;

    <span class="fn">Relationship</span>(string h, string w) {
        him = h;
        her = w;
        distance_km = <span class="num">4300</span>;
    }

    <span class="kw">void</span> <span class="fn">maintain_connection</span>() {
        <span class="kw">while</span> (<span class="kw">true</span>) { <span class="cmt">// Forever loop</span>
            <span class="kw">if</span> (distance_km > <span class="num">0</span>) {
                <span class="fn">video_call</span>();
                <span class="cmt">// TODO: Merge in Feb 2026</span>
            } <span class="kw">else</span> {
                <span class="fn">hug</span>();
            }
        }
    }
};

<span class="kw">int</span> <span class="fn">main</span>() {
    <span class="type">Relationship</span> baobao(<span class="str">"Naveen"</span>, <span class="str">"Abi"</span>);
    baobao.<span class="fn">maintain_connection</span>();
    <span class="kw">return</span> <span class="num">0</span>;
}</div></div></div>

    <div id="win-sound" class="window" style="max-width: 500px;">
        <div class="window-header"><div class="window-title">Soundboard</div><button class="btn-close" onclick="closeWindow('win-sound')">‚úï</button></div>
        <div class="window-content">
            <div class="sound-alert">üîä Please turn on sound</div>
            <div class="sound-grid">
                <div class="sound-btn" onclick="playSound('snd1')"><span>üë¶</span>Naveen Sir</div>
                <div class="sound-btn" onclick="playSound('snd2')"><span>üìû</span>Ling Yo Phone</div>
                <div class="sound-btn" onclick="playSound('snd3')"><span>ü§®</span>Why are you black</div>
                <div class="sound-btn" onclick="playSound('snd4')"><span>‚ù§Ô∏è</span>Tumhe pyaar</div>
                <div class="sound-btn" onclick="playSound('snd5')"><span>üß∏</span>Wo ai ni bao bao</div>
                <div class="sound-btn" onclick="playSound('snd6')"><span>üéÇ</span>Happy Birthday</div>
            </div>
            
            <div style="border-radius: 12px; overflow: hidden; margin-top: 10px;">
                <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/1BYZxKSf0aTxp8ZFoeyM3d?utm_source=generator" width="100%" height="152" frameBorder="0" allowfullscreen="" a[...]
            </div>

            <audio id="snd1" src="sound-naveen.mp3"></audio>
            <audio id="snd2" src="sound-ling.mp3"></audio>
            <audio id="snd3" src="sound-black.mp3"></audio>
            <audio id="snd4" src="sound-hindi1.mp3"></audio>
            <audio id="snd5" src="sound-hindi2.mp3"></audio>
            <audio id="snd6" src="sound-hindi3.mp3"></audio>
        </div>
    </div>

    <div id="win-tinder" class="window" style="max-width: 450px; height: 750px; max-height: 85vh;">
        <div class="window-header"><div class="window-title">Matches</div><button class="btn-close" onclick="closeWindow('win-tinder')">‚úï</button></div>
        <div class="window-content" style="padding: 20px; display:flex; flex-direction:column; height:100%; overflow:hidden; position:relative;">
            
            <div id="tinder-swipe-interface" class="tinder-container">
                <div class="tinder-card-wrap" id="card-wrap">
                    <div id="tinder-card" class="tinder-card" style="background-image: url('tinder-profile.jpg');">
                        <div class="tinder-overlay"><h2 class="tinder-name">ÊØî, 24</h2></div>
                        <div class="swipe-hint" id="swipe-hint">Swipe ‚Üí</div>
                    </div>
                </div>
                <div class="tinder-actions">
                    <button class="tinder-btn nope" onclick="alert('Oops! Only one way to swipe hehe')">‚úï</button>
                    <button class="tinder-btn like" onclick="handleSwipeRight()">‚ô•</button>
                </div>
            </div>

            <div id="tinder-match-screen" class="tinder-match">
                <div class="match-title">It's a Match!</div>
                <div class="match-photos">
                    <img src="tinder-profile.jpg" class="match-img" style="z-index:2;">
                    <img src="him.jpg" class="match-img" style="z-index:1;">
                </div>
                <p style="font-size:14px; margin-bottom: 30px;">You and Abi have liked each other.</p>
                <button class="chat-send" onclick="showChat()" style="width: 80%; font-size: 16px;">Send a Message</button>
            </div>

            <div id="tinder-chat-screen" class="tinder-chat">
                <div class="chat-header">Abi</div>
                <div class="chat-body" id="chat-body-content">
                    <div class="chat-system">You matched with Abi on Oct 13, 2025</div>
                    <div class="chat-bubble">hello, how are u? i am under the water... please help me </div>
                    <div class="chat-bubble">btw i am able to receive yo texts... </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="tinder-msg-input" class="chat-input" placeholder="Type a message...">
                    <button class="chat-send" onclick="sendTinderMessage()">Send</button>
                </div>
            </div>

        </div>
    </div>

    <div id="overlay" onclick="closeOverlay()">
        <h1>Happy Birthday Naveen Sir!</h1>
        <p>Baobao OS Update Complete.</p>
        <div style="font-size: 5rem;">üéÇ</div>
        <p style="margin-top:20px; font-size:14px; color:#888;">(Click anywhere to enter)</p>
    </div>
    <canvas id="confetti-canvas"></canvas>

    <script>
        // F12 Console Easter Egg
        console.log("%c Happy Birthday Naveen üéÇ", "font-size: 30px; font-weight: bold; color: #FF2D55; background: #fff; padding: 10px; border-radius: 5px;");
        console.log("Waiting for our meet hehe");

        // Global functions defined FIRST to prevent ReferenceErrors
        function openWindow(id) {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('open'));
            const win = document.getElementById(id);
            if(win) win.classList.add('open');
        }
        
        function closeWindow(id) { 
            const win = document.getElementById(id);
            if(win) win.classList.remove('open');
            
            if(id === 'win-music') {
                const a = document.getElementById('audio-file'); 
                if(a) a.pause();
                const btn = document.getElementById('play-btn');
                if(btn) btn.textContent = '‚ñ∂';
            }
            if(id === 'win-youtube') {
                const iframe = document.getElementById('rickroll-frame');
                if(iframe) { const src = iframe.src; iframe.src = ''; iframe.src = src; }
            }
            if(id === 'win-monitor') { clearInterval(monitorInterval); }
            if(id === 'win-tinder') {
                setTimeout(() => {
                    const card = document.getElementById('tinder-card');
                    if(card) { card.style.transform = ''; card.style.opacity = '1'; }
                    const match = document.getElementById('tinder-match-screen');
                    if(match) match.classList.remove('active');
                    const chat = document.getElementById('tinder-chat-screen');
                    if(chat) chat.classList.remove('active');
                    const hint = document.getElementById('swipe-hint');
                    if(hint) hint.classList.remove('hidden');
                }, 300);
            }
        }

        function toggleTheme(btn) {
            btn.classList.toggle('active');
            if(document.body.getAttribute('data-theme') === 'dark'){
                document.body.removeAttribute('data-theme');
            } else {
                document.body.setAttribute('data-theme', 'dark');
            }
        }

        function playSound(id) {
            const sound = document.getElementById(id);
            if(sound) {
                sound.currentTime = 0;
                sound.play().catch(() => alert("Sound file not found! Check filenames."));
            }
        }

        function closeOverlay() {
            document.getElementById('overlay').classList.remove('show');
        }

        // Clock Logic - More robust timezone handling using Intl.DateTimeFormat.formatToParts
        function formatTimeForTZ(date, tz) {
            try {
                const fmt = new Intl.DateTimeFormat('en-GB', {
                    hour: '2-digit', minute: '2-digit', hour12: false, timeZone: tz
                });
                const parts = fmt.formatToParts(date);
                const hourPart = parts.find(p => p.type === 'hour');
                const minutePart = parts.find(p => p.type === 'minute');
                let hour = hourPart ? hourPart.value : '00';
                const minute = minutePart ? minutePart.value : '00';
                // Some implementations may return '24' for midnight; normalize to '00'
                if (hour === '24') hour = '00';
                return `${hour}:${minute}`;
            } catch (e) {
                // Fallback
                try {
                    const s = date.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit', hour12: false, timeZone: tz });
                    return s.startsWith('24') ? s.replace('24','00') : s;
                } catch (e2) {
                    return '--:--';
                }
            }
        }

        function updateClock() {
            const now = new Date();
            const tpeEl = document.getElementById('clock-tpe');
            if(tpeEl) tpeEl.innerHTML = `<span>TPE</span> ${formatTimeForTZ(now, 'Asia/Taipei')}`;
            const delEl = document.getElementById('clock-del');
            if(delEl) delEl.innerHTML = `<span>DEL</span> ${formatTimeForTZ(now, 'Asia/Kolkata')}`;
        }

        setInterval(updateClock, 1000); 
        updateClock();

        // Audio Player Logic (defensive)
        const audio = document.getElementById('audio-file');
        const playBtn = document.getElementById('play-btn');
        const slider = document.getElementById('seek-slider');
        
        function togglePlay() {
            if(!audio) return;
            if(audio.paused) { 
                audio.play().then(()=>{ if(playBtn) playBtn.textContent='‚è∏'; }).catch(()=>alert("Upload voice-note.mp3!")); 
            } else { 
                audio.pause(); if(playBtn) playBtn.textContent='‚ñ∂'; 
            }
        }
        if(audio) {
            audio.addEventListener('timeupdate', () => { if(slider && audio.duration) slider.value = (audio.currentTime/audio.duration)*100; });
            if(slider) slider.addEventListener('input', () => { if(audio.duration) audio.currentTime = (slider.value/100)*audio.duration; });
        }

        // Terminal Logic
        function focusTerminal() { setTimeout(() => { const el = document.getElementById('term-input'); if(el) el.focus(); }, 100); }
        function escapeHtml(str) {
            return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[s]);
        }
        function handleCommand(e) {
            if (e.key === 'Enter') {
                const input = document.getElementById('term-input');
                const output = document.getElementById('term-output');
                if(!input || !output) return;
                const cmd = input.value.trim();
                output.innerHTML += `<div><span style="color:#4af626">naveen@baobao:~$</span> ${escapeHtml(cmd)}</div>`;
                let response = "";
                switch(cmd.toLowerCase()) {
                    case 'help': response = "Commands: love, abi, blanket, chai, chopsticks, lick, clear"; break;
                    case 'love': response = "Start: 2025-10-13.<br>Status: We are going stronger!!"; break;
                    case 'abi': response = "Just a reminder that somewhere in the world, someone is always thinking of you"; break;
                    case 'blanket': response = "Deploying virtual blanket üõå Warmth level: 100%. Snuggle together "; break;
                    case 'chai': response = "Brewing Chai... Spice level: As hot as you. Sipping together "; break;
                    case 'chopsticks': response = "Skill check: Expert ü•¢ Ready for noodles date in Taiwan hehe"; break;
                    case 'lick': response = "SUS why are you typing this üëÖ"; break;    
                    case 'clear': output.innerHTML = ""; input.value = ""; return;
                    default: response = `Command not found: ${escapeHtml(cmd)}. Try 'help'.`;
                }
                if(response) output.innerHTML += `<div style="color:#ccc; margin-bottom:10px;">${response}</div>`;
                input.value = ""; output.scrollTop = output.scrollHeight;
            }
        }

        // Tinder Logic - Pointer Events + rAF for smooth dragging + swipe hint
        (function initTinder() {
            const cardWrap = document.getElementById('card-wrap');
            const card = document.getElementById('tinder-card');
            const swipeHint = document.getElementById('swipe-hint');
            if (!cardWrap || !card) return;

            let dragging = false;
            let startX = 0;
            let translateX = 0;
            let rotation = 0;
            let rafId = null;

            function updateTransform() {
                card.style.transform = `translate3d(${translateX}px, 0, 0) rotate(${rotation}deg)`;
                rafId = null;
            }
            function scheduleUpdate() {
                if (!rafId) rafId = requestAnimationFrame(updateTransform);
            }

            function onPointerDown(e) {
                // only left/mouse or touch
                dragging = true;
                startX = e.clientX;
                card.style.transition = 'none';
                if (swipeHint) swipeHint.classList.add('hidden');
                // capture pointer if available
                try { if (e.pointerId && card.setPointerCapture) card.setPointerCapture(e.pointerId); } catch (err) {}
            }
            function onPointerMove(e) {
                if (!dragging) return;
                translateX = e.clientX - startX;
                rotation = translateX * 0.08;
                scheduleUpdate();
            }
            function onPointerUp(e) {
                if (!dragging) return;
                dragging = false;
                card.style.transition = 'transform 0.5s ease, opacity 0.5s ease';
                // release pointer capture if possible
                try { if (e.pointerId && card.releasePointerCapture) card.releasePointerCapture(e.pointerId); } catch (err) {}

                if (translateX > 100) {
                    // swipe right -> match
                    card.style.transform = `translate3d(500px, 0, 0) rotate(45deg)`;
                    card.style.opacity = '0';
                    setTimeout(() => {
                        const match = document.getElementById('tinder-match-screen');
                        if (match) match.classList.add('active');
                    }, 600);
                } else if (translateX < -100) {
                    // left swipe not allowed in this app; bounce back and show hint
                    card.style.transform = 'translate3d(0,0,0) rotate(0)';
                    card.style.opacity = '1';
                    setTimeout(()=> { if (swipeHint) swipeHint.classList.remove('hidden'); }, 300);
                    setTimeout(()=>{ alert("only Right Swipe allowed hehe"); }, 50);
                } else {
                    // snap back
                    card.style.transform = 'translate3d(0,0,0) rotate(0)';
                    card.style.opacity = '1';
                    if (swipeHint) swipeHint.classList.remove('hidden');
                }
                translateX = 0;
                rotation = 0;
            }

            // Use pointer events where available
            card.addEventListener('pointerdown', onPointerDown, { passive: true });
            card.addEventListener('pointermove', onPointerMove, { passive: true });
            card.addEventListener('pointerup', onPointerUp, { passive: true });
            card.addEventListener('pointercancel', onPointerUp, { passive: true });

            // Accessibility: allow keyboard "like" via Enter when focused
            card.setAttribute('tabindex', '0');
            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') handleSwipeRight();
            });

            // expose programmatic functions
            window.startTinder = function() {
                setTimeout(() => {
                    card.style.transform = '';
                    card.style.opacity = '1';
                    if (swipeHint) swipeHint.classList.remove('hidden');
                    const match = document.getElementById('tinder-match-screen');
                    if(match) match.classList.remove('active');
                    const chat = document.getElementById('tinder-chat-screen');
                    if(chat) chat.classList.remove('active');
                }, 100);
            };

            window.handleSwipeRight = function() {
                // programmatic right swipe (same visual)
                card.style.transition = 'transform 0.8s ease, opacity 0.8s ease';
                card.style.transform = 'translate3d(500px, 0, 0) rotate(45deg)';
                card.style.opacity = '0';
                if (swipeHint) swipeHint.classList.add('hidden');
                setTimeout(() => {
                    const match = document.getElementById('tinder-match-screen');
                    if (match) match.classList.add('active');
                }, 600);
            };

        })();

        function showChat() {
            document.getElementById('tinder-match-screen').classList.remove('active');
            document.getElementById('tinder-chat-screen').classList.add('active');
            setTimeout(() => { const el = document.getElementById('tinder-msg-input'); if(el) el.focus(); }, 300);
        }

        async function sendTinderMessage() {
            const input = document.getElementById('tinder-msg-input');
            const btn = document.querySelector('.chat-send');
            const chatBody = document.getElementById('chat-body-content');
            if(!input || !chatBody || !btn) return;
            const msg = input.value.trim();

            if(!msg) return;

            const bubble = document.createElement('div');
            bubble.className = 'chat-bubble me'; 
            bubble.innerText = msg;
            chatBody.appendChild(bubble);
            chatBody.scrollTop = chatBody.scrollHeight; 

            input.value = ""; 
            const originalText = btn.innerText;
            btn.innerText = "Sending...";

            const formId = "mqeavvar"; // 

            try {
                await fetch(`https://formspree.io/f/${formId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: "Tinder Chat: " + msg })
                });
                btn.innerText = "Sent!";
                setTimeout(() => { btn.innerText = originalText; }, 1500);
            } catch (error) {
                btn.innerText = "Error";
                alert("Please replace 'mqeavvar' with your real ID.");
            }
        }

        // Monitor Logic
        let monitorInterval;
        function startMonitor() {
            const cpu = document.getElementById('bar-cpu');
            const mem = document.getElementById('bar-mem');
            const hr = document.getElementById('bar-hr');
            const valCpu = document.getElementById('val-cpu');
            const valMem = document.getElementById('val-mem');
            const valHr = document.getElementById('val-hr');

            if(cpu) {
                monitorInterval = setInterval(() => {
                    let c = Math.floor(Math.random() * 6) + 95;
                    cpu.style.width = c + "%"; if(valCpu) valCpu.innerText = c + "%";
                    if(mem) mem.style.width = "99%"; if(valMem) valMem.innerText = "99%";
                    let h = Math.floor(Math.random() * 20) + 110;
                    if(hr) hr.style.width = (h/2) + "%"; if(valHr) valHr.innerText = h + " BPM";
                }, 800);
            }
        }

        // Confetti Logic - corrected and limited for mobile
        const cvs = document.getElementById('confetti-canvas');
        const ctx = cvs ? cvs.getContext('2d') : null;
        if (cvs) { cvs.width = window.innerWidth; cvs.height = window.innerHeight; }
        let conf = []; let spawning = false;
        const cols = ['#007AFF','#FF2D55','#5856D6','#FF9500'];

        function isLowEndDevice() {
            try {
                return (window.innerWidth < 420) || (navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 2);
            } catch (e) { return false; }
        }

        function spawnConfettiLimited() {
            if (!cvs) return;
            const count = isLowEndDevice() ? 60 : 150;
            for (let i = 0; i < count; i++) {
                conf.push({
                  x: Math.random() * cvs.width,
                  y: Math.random() * -cvs.height,
                  c: cols[Math.floor(Math.random() * cols.length)],
                  s: Math.random() * 8 + 5,
                  v: Math.random() * 3 + 2,
                  a: Math.random() * Math.PI * 2
                });
            }
        }

        function drawConfetti() {
            if (!ctx || !cvs) return;
            ctx.clearRect(0,0,cvs.width,cvs.height);
            let active = 0;
            conf.forEach(p=>{
                p.y += p.v;
                p.x += Math.sin(p.a) * 2;
                p.a += 0.02;
                if(p.y < cvs.height) {
                    ctx.fillStyle = p.c;
                    ctx.fillRect(p.x, p.y, p.s, p.s);
                    active++;
                } else if(spawning) {
                    p.y = -10;
                    p.x = Math.random() * cvs.width;
                    active++;
                }
            });
            if(active > 0) requestAnimationFrame(drawConfetti);
        }

        function deploySystem() {
            document.getElementById('overlay').classList.add('show');
            spawning = true;
            spawnConfettiLimited();
            drawConfetti();
            setTimeout(()=>{spawning=false;},3000);
        }
        window.addEventListener('resize', ()=>{ if(cvs){ cvs.width=window.innerWidth; cvs.height=window.innerHeight; }});

    </script>
</body>
</html>
