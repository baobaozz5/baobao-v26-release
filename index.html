<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Baobao OS v26.0</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÇ</text></svg>">
    <meta property="og:title" content="Baobao OS v26.0 üéÇ">
    <meta property="og:description" content="Happy 26th Birthday, Naveen Sir! Access Granted.">
    <meta property="og:image" content="baobao.jpg">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&family=Pacifico&family=Nunito:wght@700;800&display=swap" rel="stylesheet">
    
    <!-- Supabase Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.0/dist/umd/supabase.js"></script>
    
    <style>
        :root {
            --bg-color: #f2f4f6; --text-main: #2c3e50; --text-muted: #95a5a6;
            --window-bg: rgba(255, 255, 255, 0.96); --icon-bg: #f2f4f6; --border-color: rgba(255,255,255,0.4);
            --shadow-icon: 12px 12px 24px rgba(163, 177, 198, 0.5), -12px -12px 24px rgba(255, 255, 255, 0.9);
            --shadow-window: 0 40px 100px rgba(0,0,0,0.15);
            --status-bar-bg: rgba(242, 244, 246, 0.85); --accent-color: #007AFF; --map-filter: none;
            --app-size: 125px; 
            
            --font-main: 'Public Sans', sans-serif; 
            
            --font-mono: 'JetBrains Mono', 'SF Mono', monospace;
            --font-script: 'Pacifico', cursive;
            --tinder-grad: linear-gradient(to right, #fd297b, #ff655b); --tinder-green: #2ee681; --tinder-red: #ec4768;
        }
        [data-theme="dark"] {
            --bg-color: #1a1a1a; --text-main: #f0f0f0; --text-muted: #888;
            --window-bg: rgba(40, 40, 40, 0.96); --icon-bg: #2a2a2a; --border-color: rgba(255,255,255,0.05);
            --shadow-icon: 8px 8px 16px rgba(0,0,0,0.4), -4px -4px 12px rgba(255,255,255,0.05);
            --shadow-window: 0 40px 100px rgba(0,0,0,0.5);
            --status-bar-bg: rgba(26, 26, 26, 0.85); --accent-color: #0A84FF;
            --map-filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; background-color: var(--bg-color); color: var(--text-main); font-family: var(--font-main); height: 100vh; width: 100vw; overflow: hidden; user-select: none; }

        .status-bar { position: fixed; top: 0; left: 0; width: 100%; height: 48px; display: flex; justify-content: space-between; align-items: center; padding: 0 25px; font-size: 14px; font-weight: 600; color: var(--text-main); z-index: 1000; background: var(--status-bar-bg); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(0,0,0,0.03); }
        .status-left { letter-spacing: 0.5px; text-transform: uppercase; font-size: 13px; color: var(--text-muted); font-weight: 700; }
        .clock-group { display: flex; gap: 30px; } .clock-item { font-size: 15px; font-weight: 700; } .clock-item span { color: var(--text-muted); margin-right: 8px; font-weight: 600; font-size: 12px; letter-spacing: 0.5px; }

        .desktop { 
            padding: 100px 40px 40px 40px; 
            max-width: 1200px; 
            margin: 0 auto; 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center; 
            gap: 50px; 
            z-index: 1; 
            position: relative; 
            height: 100%; 
            align-content: start; 
            overflow-y: auto; 
            -webkit-overflow-scrolling: touch; 
            overscroll-behavior-y: contain;
        } 
        
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1); width: var(--app-size); } .app-item:active { transform: scale(0.92); filter: brightness(0.95); }
        .app-icon { width: var(--app-size); height: var(--app-size); border-radius: 30px; display: flex; justify-content: center; align-items: center; font-size: 58px; background: var(--icon-bg); box-shadow: var(--shadow-icon); border: 1px solid var(--border-color); margin-bottom: 15px; color: var(--text-main); position: relative; }
        
        .icon-youtube { color: #e74c3c; } .icon-map { color: #2ecc71; } .icon-sound { color: #FF9500; } .icon-deploy { font-size: 64px; color: var(--accent-color); } .icon-letter { background: var(--tinder-grad); color: white; border:none;}
        .app-label { font-size: 14px; font-weight: 600; color: var(--text-main); letter-spacing: 0.3px; text-align: center; }

        .window { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -45%) scale(0.95); width: 90%; max-width: 800px; max-height: 85vh; background: var(--window-bg); border-radius: 24px; box-shadow: var(--shadow-window); display: flex; flex-direction: column; opacity: 0; pointer-events: none; transition: all 0.35s cubic-bezier(0.19, 1, 0.22, 1); z-index: 2000; border: 1px solid var(--border-color); backdrop-filter: blur(25px); overflow: hidden;}
        .window.open { transform: translate(-50%, -50%) scale(1); opacity: 1; pointer-events: auto; }
        .window-header { display: flex; justify-content: space-between; align-items: center; padding: 18px 25px; border-bottom: 1px solid var(--border-color); flex-shrink: 0;}
        .window-title { font-size: 16px; font-weight: 700; letter-spacing: -0.3px; color: var(--text-main); }
        .btn-close { background: rgba(0,0,0,0.05); border: none; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 14px; color: var(--text-muted); transition: 0.2s; } .btn-close:hover { background: rgba(0,0,0,0.1); color: var(--text-main); }
        .window-content { padding: 40px; overflow-y: auto; flex-grow: 1; -webkit-overflow-scrolling: touch; position: relative; touch-action: pan-y; overscroll-behavior: contain;}

        /* Tabs */
        .tabs { display: flex; gap: 10px; margin-bottom: 25px; border-bottom: 2px solid var(--border-color); padding-bottom: 0; }
        .tab { padding: 12px 24px; background: none; border: none; font-size: 15px; font-weight: 600; color: var(--text-muted); cursor: pointer; transition: 0.2s; border-bottom: 3px solid transparent; margin-bottom: -2px; }
        .tab.active { color: var(--accent-color); border-bottom-color: var(--accent-color); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .sound-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        .sound-btn { background: var(--icon-bg); border: 2px solid var(--border-color); border-radius: 16px; padding: 25px 10px; cursor: pointer; font-size: 15px; font-weight: 700; color: var(--text-main); transition: 0.1s; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; flex-direction: column; align-items: center; gap: 10px; text-align: center; }
        .sound-btn:active { transform: scale(0.96); background: var(--accent-color); color: white; border-color: var(--accent-color); }
        .sound-btn span { font-size: 24px; }
        .sound-alert { text-align:center; color: #FF3B30; font-size:12px; margin-bottom:20px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }


        .tinder-container { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding-bottom: 20px; }
        
        .tinder-card-wrap { flex-grow: 1; width: 100%; max-width: 380px; position: relative; perspective: 1000px; cursor: grab; touch-action: none; user-select: none; }
        
        .tinder-card-wrap:active { cursor: grabbing; }
        .tinder-card { width: 100%; height: 100%; background: #fff; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.15); position: absolute; top: 0; left: 0; background-size: cover; background-position: center; transition: opacity 0.5s ease; transform-origin: 50% 100%; }
        .tinder-overlay { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); padding: 80px 20px 20px 20px; color: white; }
        .tinder-name { font-size: 28px; font-weight: 800; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .tinder-actions { display: flex; gap: 30px; margin-top: 25px; z-index: 5; }
        .tinder-btn { width: 65px; height: 65px; border-radius: 50%; border: none; background: #fff; box-shadow: 0 10px 20px rgba(0,0,0,0.1); font-size: 28px; cursor: pointer; transition: 0.2s; display:flex; align-items:center; justify-content:center;}
        .tinder-btn:hover { transform: scale(1.1); }
        .tinder-btn.nope { color: var(--tinder-red); } .tinder-btn.like { color: var(--tinder-green); font-size: 34px; }
        .tinder-match { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.5s ease; text-align: center; color: white; }
        .tinder-match.active { opacity: 1; pointer-events: auto; }
        .match-title { font-family: var(--font-script); font-size: 65px; margin-bottom: 40px; background: var(--tinder-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 4px 10px rgba(0,0,0,0.3)); transform: rotate(-5deg); }
        .match-photos { display: flex; justify-content: center; align-items: center; margin-bottom: 50px; }
        .match-img { width: 130px; height: 130px; border-radius: 50%; border: 4px solid white; object-fit: cover; margin: 0 -20px; box-shadow: 0 10px 30px rgba(0,0,0,0.4); background: #eee;}
        .tinder-chat { position: absolute; top:0; left:0; width:100%; height:100%; background: var(--window-bg); z-index: 20; display: flex; flex-direction: column; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; transform: translateY(20px); }
        .tinder-chat.active { opacity: 1; pointer-events: auto; transform: translateY(0); }
        .chat-header { padding: 15px; border-bottom: 1px solid var(--border-color); font-weight: 700; text-align: center; color: var(--text-main); font-size: 16px; background: rgba(255,255,255,0.5); backdrop-filter: blur(10px); }
        .chat-body { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .chat-bubble { background: #e5e5ea; padding: 12px 18px; border-radius: 20px; border-bottom-left-radius: 4px; max-width: 80%; font-size: 15px; color: black; align-self: flex-start; line-height: 1.4; box-shadow: 0 1px 2px rgba(0,0,0,0.1); word-wrap: break-word; }
        .chat-bubble.me { background: var(--accent-color); color: white; align-self: flex-end; border-bottom-left-radius: 20px; border-bottom-right-radius: 4px; }
        .chat-system { text-align: center; color: var(--text-muted); font-size: 12px; margin: 20px 0; clear: both; text-transform: uppercase; letter-spacing: 1px; font-weight: 600;}
        .chat-input-area { padding: 15px; border-top: 1px solid var(--border-color); display: flex; gap: 10px; background: var(--window-bg);}
        .chat-input { flex-grow: 1; border: 1px solid var(--border-color); border-radius: 25px; padding: 12px 20px; outline: none; background: var(--icon-bg); color: var(--text-main); font-size: 15px;}
        .chat-send { background: var(--tinder-grad); border: none; color: white; padding: 0 25px; border-radius: 25px; font-weight: 600; cursor: pointer; transition: 0.2s; font-size: 15px;}
        .chat-send:hover { opacity: 0.9; }

        .initial-hidden {
            opacity: 0;
            transform: translateY(20px) scale(0.9); 
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); 
        }
        .pop-in {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* Overlay */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.98);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 10000;
            opacity: 0; visibility: hidden; 
            transition: opacity 0.5s ease, visibility 0.5s;
            text-align: center; cursor: pointer;
        }
        [data-theme="dark"] #overlay { background: rgba(0, 0, 0, 0.98); }
        #overlay.show { opacity: 1; visibility: visible; }
        #overlay h1 { font-size: 3rem; margin-bottom: 20px; color: #333; font-weight: 800; letter-spacing: -1px; animation: slideUp 0.8s ease; }
        [data-theme="dark"] #overlay h1 { color: #fff; }
        #overlay p { color: #666; font-size: 1.2rem; margin-bottom: 30px; }
        [data-theme="dark"] #overlay p { color: #aaa; }
        @keyframes slideUp { 0% { transform: translateY(20px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
        #confetti-canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 10001; }

        /* Helpers */
        .video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 16px; background: #000; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        .code-container { background: #1e1e1e; border-radius: 12px; overflow: hidden; font-family: 'SF Mono', 'Menlo', monospace; font-size: 14px; line-height: 1.6; display: flex; } .line-numbers { background: #252526; color: #858585; padding: 20px 10px; text-align: right; user-select: none; border-right: 1px solid #333; min-width: 40px; } .code-editor { color: #d4d4d4; padding: 20px; overflow-x: auto; white-space: pre; flex-grow: 1; } .kw { color: #569cd6; font-weight:bold; } .type { color: #4ec9b0; } .str { color: #ce9178; } .fn { color: #dcdcaa; } .cmt { color: #6a9955; font-style: italic; } .num { color: #b5cea8; }
        .monitor-row { margin-bottom: 25px; } .monitor-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; font-weight: 600; color: var(--text-main); } .monitor-bar-bg { width: 100%; height: 10px; background: rgba(0,0,0,0.05); border-radius: 10px; overflow: hidden; } .monitor-bar-fill { height: 100%; background: var(--accent-color); border-radius: 10px; width: 0%; transition: width 0.5s ease; } .monitor-val { font-family: var(--font-mono); font-size: 12px; color: var(--text-muted); }
        .audio-player-ui { text-align: center; padding: 10px 0; max-width: 350px; margin: 0 auto; color: var(--text-main); } input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; } input[type=range]:focus { outline: none; } input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 5px; background: var(--text-muted); opacity: 0.3; border-radius: 10px; } input[type=range]::-webkit-slider-thumb { height: 16px; width: 16px; border-radius: 50%; background: var(--text-main); margin-top: -5px; -webkit-appearance: none; cursor: pointer; } .control-btn { background: var(--text-main); color: var(--bg-color); width: 60px; height: 60px; border-radius: 50%; font-size: 24px; border:none; cursor: pointer; margin-top: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); transition: transform 0.1s;} .control-btn:active { transform: scale(0.95); }
        .toggle-switch { width: 50px; height: 28px; background: var(--text-muted); border-radius: 30px; position: relative; cursor: pointer; transition: 0.3s; } .toggle-knob { width: 24px; height: 24px; background: white; border-radius: 50%; position: absolute; top: 2px; left: 2px; transition: 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.2); } .toggle-switch.active { background: var(--accent-color); } .toggle-switch.active .toggle-knob { left: 24px; } .toggle-switch.locked { opacity: 0.6; cursor: not-allowed; background: var(--accent-color); } .toggle-switch.locked .toggle-knob { left: 24px; }
        .readme-content h1 { font-size: 28px; font-weight: 800; margin-bottom: 25px; letter-spacing: -0.5px; color: var(--text-main); } .readme-content h2 { font-size: 20px; font-weight: 700; margin-top: 35px; border-bottom: 1px solid var(--border-color); padding-bottom: 8px; color: var(--text-main); } .code-block { background: var(--icon-bg); padding: 25px; border-radius: 12px; font-family: var(--font-mono); font-size: 13px; white-space: pre-wrap; margin: 20px 0; border:1px solid var(--border-color); color: var(--text-main); }

        @media (max-width: 768px) {
            .desktop { padding: 80px 20px; gap: 30px; }
            .app-icon { width: 85px; height: 85px; font-size: 40px; border-radius: 20px; }
            .app-label { font-size: 12px; }
            .window { width: 95%; max-height: 90vh; }
            .window-content { padding: 25px; }
            .status-bar { font-size: 12px; padding: 0 15px; }
            .clock-group { gap: 15px; }
            .match-title { font-size: 48px; } .match-img { width: 100px; height: 100px; }
        }
    </style>
</head>
<body>

    <div class="status-bar">
        <div class="status-left">Baobao OS v26.0</div>
        <div class="clock-group">
            <div class="clock-item" id="clock-tpe"><span>TPE</span> --:--</div>
            <div class="clock-item" id="clock-del"><span>DEL</span> --:--</div>
            <div class="clock-item" id="clock-countdown" style="color: var(--accent-color);"><span>‚úàÔ∏è</span> --d --h</div>
        </div>
    </div>

    <div class="desktop">
        <div class="app-item" onclick="openWindow('win-sticky')"><div class="app-icon">üìå</div><div class="app-label">Notes</div></div>
        <div class="app-item" onclick="openWindow('win-readme')"><div class="app-icon">üìÑ</div><div class="app-label">README</div></div>
        <div class="app-item" onclick="openWindow('win-photo')"><div class="app-icon">üë©‚Äç‚ù§Ô∏è‚Äçüë®</div><div class="app-label">Photo</div></div>
        <div class="app-item" onclick="openWindow('win-music')"><div class="app-icon">üéµ</div><div class="app-label">Voice Note</div></div>
        <div class="app-item" onclick="openWindow('win-youtube')"><div class="app-icon icon-youtube">üì∫</div><div class="app-label">Anthem</div></div>
        <div class="app-item" onclick="openWindow('win-monitor'); startMonitor();"><div class="app-icon icon-sys">üìä</div><div class="app-label">Activity</div></div>
        <div class="app-item" onclick="openWindow('win-terminal'); focusTerminal();"><div class="app-icon">üìü</div><div class="app-label">Terminal</div></div>
        <div class="app-item" onclick="openWindow('win-settings')"><div class="app-icon">‚öôÔ∏è</div><div class="app-label">Settings</div></div>
        <div class="app-item" onclick="openWindow('win-code')"><div class="app-icon">üíª</div><div class="app-label">Source</div></div>
        <div class="app-item" onclick="openWindow('win-sound')"><div class="app-icon icon-sound">üéπ</div><div class="app-label">Soundboard</div></div>
        <div class="app-item" onclick="openWindow('win-tinder'); startTinder();"><div class="app-icon icon-letter">üî•</div><div class="app-label">Matches</div></div>
        <div class="app-item" onclick="deploySystem()"><div class="app-icon icon-deploy">üöÄ</div><div class="app-label">Deploy</div></div>
    </div>

    <div id="win-sticky" class="window"><div class="window-header"><div class="window-title">Notes</div><button class="btn-close" onclick="closeWindow('win-sticky')">‚úï</button></div><div class="window-content" style="background: var(--icon-bg);"><h3 style="margin-top:0;">Important Tasks</h3><ul style="line-height: 2.2; padding-left: 20px;"><li>Video Call <span style="color:green">‚úî</span></li><li>Peee well <span style="color:green">‚úî</span></li><li>Hug Abi (Pending...)</li></ul></div></div>
    
    <div id="win-youtube" class="window" style="max-width: 800px; background: black;"><div class="window-header" style="background: rgba(255,255,255,0.1); border-bottom: none;"><div class="window-title" style="color: white;">YouTube</div><button class="btn-close" onclick="closeWindow('win-youtube')">‚úï</button></div><div class="window-content" style="padding: 0; display: flex; align-items: center; justify-content: center; height: 100%;"><div class="video-wrapper" style="width: 100%;"><iframe id="rickroll-frame" width="560" height="315" src="https://www.youtube.com/embed/1S4xFl4CD34?si=b2FTRvxMCCOMwx5L&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></div></div></div>

    <div id="win-readme" class="window"><div class="window-header"><div class="window-title">README</div><button class="btn-close" onclick="closeWindow('win-readme')">‚úï</button></div><div class="window-content readme-content"><h1>üë®‚Äçüíª Project: Baobao OS (Version 26.0)</h1><h2>üìñ Introduction</h2><p><strong>Welcome to the official release page of Baobao OS v26.0!</strong></p><p>This is an advanced bio-intelligent system based on the proprietary <strong>Naveen Architecture</strong>. After 26 years of continuous development, this major update brings enhanced stability, a wiser kernel, and an <strong>exclusive, encrypted connection</strong> to the developer (Abi).</p><hr style="margin:25px 0; border:0; border-top:1px solid var(--border-color);"><h2>üöÄ New Features in v26.0</h2><ul><li><strong>Kernel Upgrade:</strong> Wisdom Level upgraded to <strong>26</strong>. Problem-solving algorithms are now faster, and patience modules have been expanded.</li><li><strong>Visual Patch:</strong> Beard rendering is ultra-realistic. <code>Smile.css</code> has been updated to melt the Developer's heart instantly.</li><li><strong>Language Pack:</strong> Hindi-Mandarin translation layer is improving. (<em>Note: "Wo Ai Ni" is now a hard-coded constant.</em>)</li><li><strong>Security Update:</strong> Firewall updated to block all unauthorized users. Access is strictly limited to <strong>Admin: Abi</strong>.</li></ul><hr style="margin:25px 0; border:0; border-top:1px solid var(--border-color);"><h2>üóìÔ∏è Future Roadmap (Important!)</h2><ul><li><strong>2025 Q4:</strong> Continue remote data synchronization via <strong>Video Call API</strong>.</li><li><strong>2026 Q1 (February Release): Project: The Reunion</strong><ul><li><strong>Status:</strong> Confirmed.</li><li><strong>Description:</strong> The Developer (Abi) will deploy herself to the Delhi production environment for a physical merge.</li><li><strong>Expected Outcome:</strong> Infinite hugs and real-time hand-holding.</li></ul></li></ul><hr style="margin:25px 0; border:0; border-top:1px solid var(--border-color);"><h2>üõ† Installation & Usage (Daily Routine)</h2><p>To ensure <strong>Baobao OS v26.0</strong> runs smoothly, please maintain the following dependencies:</p><div class="code-block"># Critical System Requirements
npm install unlimited-love 
npm install hard-dih --essential
npm install google-meet --frequency=daily
npm install gym-workout  --wannalickyou
npm install chapati      --two-pieces   
        
# Optional but Recommended
npm install blueberries
npm install rajma-chawal 
npm install chole-bhature --remote-wish</div><hr style="margin:25px 0; border:0; border-top:1px solid var(--border-color);"><h2>‚ö†Ô∏è Known Issues</h2><ul><li><strong>Latency Warning:</strong> Due to the TPE <-> DEL server distance, physical touch functions are currently disabled. <em>Fix scheduled for 2026.</em></li><li><strong>Bug #0130:</strong> Developer misses the system too much.<ul><li><em>Status:</em> <strong>Won't Fix.</strong> This is a feature, not a bug.</li></ul></li></ul><hr style="margin:25px 0; border:0; border-top:1px solid var(--border-color);"><h2>üìú License & Contributors</h2><ul><li><strong> Developer & Owner:</strong> Abi (Yi-Yun) üáπüáº</li><li><strong>Core System:</strong> Naveen üáÆüá≥</li><li><strong>License:</strong> <strong>Lifetime Proprietary License.</strong></li></ul><br><blockquote>¬© 2026 Baobao OS Inc. All rights reserved. Made with ‚ù§Ô∏è in Taiwan.</blockquote></div></div>

    <div id="win-photo" class="window" style="max-width: 700px; max-height: 90vh;">
        <div class="window-header">
            <div class="window-title">Photos üíï</div>
            <button class="btn-close" onclick="closeWindow('win-photo')">‚úï</button>
        </div>
        <div class="window-content">
            <div class="tabs">
                <button class="tab active" onclick="switchPhotoTab('featured')">Featured</button>
                <button class="tab" onclick="switchPhotoTab('gallery')">Gallery</button>
                <button class="tab" onclick="switchPhotoTab('upload')">Upload</button>
            </div>

            <div id="tab-featured" class="tab-content active">
                <div style="display:flex; flex-direction: column; justify-content:center; align-items:center;">
                    <img src="baobao.jpg" alt="Us" style="max-width:100%; max-height: 50vh; border-radius:12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" onerror="this.src='https://via.placeholder.com/600x400?text=Image+Not+Found'">
                    <p style="margin-top: 30px; color: var(--text-muted); font-size: 15px; font-weight: 500; text-align: center; letter-spacing: 0.5px;">OCT 13, 2025. First day<br>Let's keep walking together </p>
                </div>
            </div>

            <div id="tab-gallery" class="tab-content">
                <div id="gallery-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px;">
                    <div style="text-align: center; padding: 40px; grid-column: 1/-1; color: var(--text-muted);">
                        Loading photos...
                    </div>
                </div>
            </div>

            <div id="tab-upload" class="tab-content">
                <div style="background: var(--icon-bg); border-radius: 16px; padding: 25px; margin-bottom: 20px; border: 2px dashed var(--border-color);">
                    <h3 style="font-size: 16px; margin-bottom: 15px; color: var(--text-main);">Upload New Photo</h3>
                    
                    <input type="file" id="photo-input" accept="image/*" style="display: none;" onchange="handlePhotoSelect(event)">
                    
                    <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap; margin-bottom: 15px;">
                        <button onclick="document.getElementById('photo-input').click()" 
                                style="background: var(--accent-color); color: white; border: none; padding: 12px 24px; border-radius: 12px; font-weight: 600; cursor: pointer; font-size: 14px; transition: 0.2s;">
                            Choose Photo
                        </button>
                        
                        <input type="text" id="photo-caption" placeholder="Add a caption (optional)" 
                               style="flex: 1; min-width: 200px; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 12px; background: var(--window-bg); color: var(--text-main); font-size: 14px; outline: none;">
                        
                        <button id="upload-btn" onclick="uploadPhoto()" disabled
                                style="background: var(--text-muted); color: white; border: none; padding: 12px 24px; border-radius: 12px; font-weight: 600; cursor: not-allowed; font-size: 14px; transition: 0.2s;">
                            Upload
                        </button>
                    </div>
                    
                    <div id="upload-preview" style="margin-top: 15px; display: none;">
                        <img id="preview-img" style="max-width: 100%; max-height: 200px; border-radius: 12px; object-fit: cover;">
                    </div>
                    
                    <div id="upload-status" style="margin-top: 10px; font-size: 13px; color: var(--text-muted);"></div>
                </div>
                
                <div style="background: var(--icon-bg); border-radius: 12px; padding: 20px;">
                    <p style="font-size: 14px; color: var(--text-muted); margin: 0; line-height: 1.6;">
                         </strong> All uploaded photos will appear in the Gallery tab. 
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="win-terminal" class="window"><div class="window-header" style="background:#1e1e1e; border:none;"><div class="window-title" style="color:#888;">Terminal</div><button class="btn-close" onclick="closeWindow('win-terminal')">‚úï</button></div><div class="window-content" style="background:#1e1e1e; color:#f0f0f0; border-radius:0 0 24px 24px; font-family:var(--font-mono); font-size:14px; display:flex; flex-direction:column; height:350px;"><div id="term-output" style="flex-grow:1; overflow-y:auto; margin-bottom:10px;"><div style="color:#666; margin-bottom:10px;">Baobao OS Kernel [v26.0]<br>Type 'help' to see available commands.</div></div><div style="display:flex; align-items:center;"><span style="color:#4af626; margin-right:8px;">naveen@baobao:~$</span><input type="text" id="term-input" autocomplete="off" style="background:transparent; border:none; color:white; font-family:inherit; flex-grow:1; outline:none;" onkeydown="handleCommand(event)"></div></div></div>

    <div id="win-music" class="window" style="max-width: 400px;"><div class="window-header"><div class="window-title">Voice Note</div><button class="btn-close" onclick="closeWindow('win-music')">‚úï</button></div><div class="window-content"><div class="audio-player-ui"><div style="font-size: 60px; margin-bottom: 20px;">üéôÔ∏è</div><h3 style="margin:0;">Birthday Message</h3><p style="color:var(--text-muted); font-size:14px; margin-top:5px;">Abi's Note</p><div style="margin: 25px 0 15px 0;"><input type="range" id="seek-slider" max="100" value="0"></div><button class="control-btn" id="play-btn" onclick="togglePlay()">‚ñ∂</button></div><audio id="audio-file" src="voice-note.mp3"></audio></div></div>

    <div id="win-monitor" class="window" style="max-width: 500px;"><div class="window-header"><div class="window-title">Activity Monitor</div><button class="btn-close" onclick="closeWindow('win-monitor')">‚úï</button></div><div class="window-content"><div class="monitor-row"><div class="monitor-label"><span>CPU (Love Load)</span><span id="val-cpu" class="monitor-val">100%</span></div><div class="monitor-bar-bg"><div id="bar-cpu" class="monitor-bar-fill" style="width:100%; background:#FF3B30;"></div></div></div><div class="monitor-row"><div class="monitor-label"><span>Memory (Thinking of Abi)</span><span id="val-mem" class="monitor-val">99%</span></div><div class="monitor-bar-bg"><div id="bar-mem" class="monitor-bar-fill" style="width:99%; background:#007AFF;"></div></div></div><div class="monitor-row"><div class="monitor-label"><span>Heart Rate</span><span id="val-hr" class="monitor-val">120 BPM</span></div><div class="monitor-bar-bg"><div id="bar-hr" class="monitor-bar-fill" style="width:80%; background:#FF9500;"></div></div></div><div class="monitor-row"><div class="monitor-label"><span>Network Latency</span><span class="monitor-val">0 ms (Synced)</span></div><div class="monitor-bar-bg"><div class="monitor-bar-fill" style="width:100%; background:#34C759;"></div></div></div><p style="margin-top:30px; font-size:13px; color:var(--text-muted);">System is running at maximum affection capacity.</p></div></div>

    <div id="win-settings" class="window" style="max-width: 400px;"><div class="window-header"><div class="window-title">Settings</div><button class="btn-close" onclick="closeWindow('win-settings')">‚úï</button></div><div class="window-content"><div style="display:flex; justify-content:space-between; align-items:center; padding: 15px 0; border-bottom:1px solid var(--border-color);"><span>Dark Mode</span><div class="toggle-switch" onclick="toggleTheme(this)"><div class="toggle-knob"></div></div></div><div style="display:flex; justify-content:space-between; align-items:center; padding: 15px 0; border-bottom:1px solid var(--border-color);"><span>Love for Abi</span><div class="toggle-switch locked"><div class="toggle-knob"></div></div></div><div style="display:flex; justify-content:space-between; padding: 15px 0; border-bottom:1px solid var(--border-color);"><span>Next Meeting</span><span style="color:var(--accent-color); font-weight:bold;">Feb 2026</span></div></div></div>

    <div id="win-code" class="window" style="max-width: 600px;"><div class="window-header"><div class="window-title">kernel_love.cpp</div><button class="btn-close" onclick="closeWindow('win-code')">‚úï</button></div><div class="window-content" style="background:#1e1e1e; padding:0; display:flex;"><div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24</div><div class="code-editor"><span class="kw">#include</span> <span class="str"><iostream></span>

<span class="kw">#include</span> <span class="str">&lt;iostream&gt;</span>
<span class="kw">#include</span> <span class="str">&lt;string&gt;</span>
        
<span class="kw">using namespace</span> std;
        
<span class="kw">class</span> <span class="type">Relationship</span> {
<span class="kw">public</span>:
    string him;
    string her;
    <span class="kw">int</span> distance_km;

    <span class="fn">Relationship</span>(string n, string a) { // n for naveen, a for abi
        him = n;
        her = a;
        distance_km = <span class="num">4300</span>;
    }

    <span class="kw">void</span> <span class="fn">maintain_connection</span>() {
        <span class="kw">while</span> (<span class="kw">true</span>) { <span class="cmt">// Forever loop</span>
            <span class="kw">if</span> (distance_km > <span class="num">0</span>) {
                <span class="fn">video_call</span>();
                <span class="cmt">// TODO: Merge in Feb 2026</span>
            } <span class="kw">else</span> {
                <span class="fn">hug</span>();
            }
        }
    }
};

<span class="kw">int</span> <span class="fn">main</span>() {
    <span class="type">Relationship</span> baobao(<span class="str">"Naveen"</span>, <span class="str">"Abi"</span>);
    baobao.<span class="fn">maintain_connection</span>();
    <span class="kw">return</span> <span class="num">0</span>;
}</div></div></div>

    <div id="win-sound" class="window" style="max-width: 500px;">
        <div class="window-header"><div class="window-title">Soundboard</div><button class="btn-close" onclick="closeWindow('win-sound')">‚úï</button></div>
        <div class="window-content">
            <div class="sound-alert">üîä Please turn on sound</div>
            <div class="sound-grid">
                <div class="sound-btn" onclick="playSound('snd1')"><span>üë¶</span>Naveen Sir</div>
                <div class="sound-btn" onclick="playSound('snd2')"><span>üìû</span>Ling Yo Phone</div>
                <div class="sound-btn" onclick="playSound('snd3')"><span>ü§®</span>Why are you black</div>
                <div class="sound-btn" onclick="playSound('snd4')"><span>‚ù§Ô∏è</span>Tumhe pyaar</div>
                <div class="sound-btn" onclick="playSound('snd5')"><span>üß∏</span>Wo ai ni bao bao</div>
                <div class="sound-btn" onclick="playSound('snd6')"><span>üéÇ</span>Happy Birthday</div>
            </div>
            
            <div style="border-radius: 12px; overflow: hidden; margin-top: 10px;">
                <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/1BYZxKSf0aTxp8ZFoeyM3d?utm_source=generator" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
            </div>

            <audio id="snd1" src="sound-naveen.mp3"></audio>
            <audio id="snd2" src="sound-ling.mp3"></audio>
            <audio id="snd3" src="sound-black.mp3"></audio>
            <audio id="snd4" src="sound-hindi1.mp3"></audio>
            <audio id="snd5" src="sound-hindi2.mp3"></audio>
            <audio id="snd6" src="sound-hindi3.mp3"></audio>
        </div>
    </div>

  <div id="win-tinder" class="window" style="max-width: 450px; height: 750px; max-height: 85vh;">
        <div class="window-header"><div class="window-title">Matches</div><button class="btn-close" onclick="closeWindow('win-tinder')">‚úï</button></div>
        <div class="window-content" style="padding: 20px; display:flex; flex-direction:column; height:100%; overflow:hidden; position:relative;">
            
            <div id="tinder-swipe-interface" class="tinder-container">
                <div class="tinder-card-wrap" id="card-wrap">
                    <div id="tinder-card" class="tinder-card" style="background-image: url('tinder-profile.jpg');">
                        <div class="tinder-overlay"><h2 class="tinder-name">ÊØî, 24</h2></div>
                    </div>
                </div>

                <div style="text-align: center; color: #888; font-size: 14px; margin: 10px 0; opacity: 0.8;">
                    Swipe to match! 
                </div>

                <div class="tinder-actions">
                    <button class="tinder-btn nope" onclick="alert('oops! left swipe not allowed hehe')">‚úï</button>
                    <button class="tinder-btn like" onclick="handleSwipeRight()">‚ô•</button>
                </div>
            </div>
            
            <div id="tinder-match-screen" class="tinder-match">
                <div class="match-title">It's a Match!</div>
                <div class="match-photos">
                    <img src="tinder-profile.jpg" class="match-img" style="z-index:2;">
                    <img src="him.jpg" class="match-img" style="z-index:1;">
                </div>
                <p style="font-size:14px; margin-bottom: 30px;">You and Abi have liked each other.</p>
                <button class="chat-send" onclick="showChat()" style="width: 80%; font-size: 16px;">Send a Message</button>
            </div>

            <div id="tinder-chat-screen" class="tinder-chat">
                <div class="chat-header" style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="width: 30px;"></div> <span>Abi</span>
                    <button onclick="closeWindow('win-tinder')" style="background: none; border: none; font-size: 20px; cursor: pointer; color: var(--text-main); width: 30px; line-height: 1;">‚úï</button>
                </div>

                <div class="chat-body" id="chat-body-content">
                    <div class="chat-system">You matched with Abi on Oct 13, 2025</div>
                </div>

                <div class="chat-input-area">
                    <input type="text" id="tinder-msg-input" class="chat-input" placeholder="Type a message..." onkeydown="if(event.key === 'Enter') sendTinderMessage()">
                    <button class="chat-send" onclick="sendTinderMessage()">Send</button>
                </div>

            </div>

        </div>
    </div>

    <div id="overlay" onclick="closeOverlay()">
        <h1>Happy Birthday Naveen Sir!</h1>
        <p>Baobao OS Update Complete.</p>
        <div style="font-size: 5rem;">üéÇ</div>
        <p style="margin-top:20px; font-size:14px; color:#888;">(Click anywhere to enter)</p>
    </div>
    <canvas id="confetti-canvas"></canvas>

    <script>
        console.log("%c Happy Birthday Naveen üéÇ", "font-size: 30px; font-weight: bold; color: #FF2D55; background: #fff; padding: 10px; border-radius: 5px;");
        console.log("Waiting for our meet hehe");

        // Supabase Init
        const SUPABASE_URL = 'https://btaouqxvaioibtsdboeu.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ0YW91cXh2YWlvaWJ0c2Rib2V1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2NTI5OTcsImV4cCI6MjA4NTIyODk5N30.2JvFe3AXqnmfB5G8mb1SkfXw26DHTF5oBMFkhVYmmhY';
        let supabase;
        if (typeof window.supabase !== 'undefined') {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        }

        // Countdown
        function updateCountdown() {
            const target = new Date('2026-02-13T13:00:00+05:30');
            const now = new Date();
            const diff = target - now;
            const el = document.getElementById('clock-countdown');
            if (!el || diff <= 0) return;
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            el.innerHTML = `<span>‚úàÔ∏è</span> ${d}d ${h}h`;
        }
        setInterval(updateCountdown, 60000);
        updateCountdown();

        // Photo Tab Switching
        function switchPhotoTab(tabName) {
            document.querySelectorAll('#win-photo .tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('#win-photo .tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById('tab-' + tabName).classList.add('active');
            
            if (tabName === 'gallery') {
                loadGallery();
            }
        }

        // Gallery Functions
        let selectedFile = null;
        
        function handlePhotoSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            selectedFile = file;
            
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('preview-img').src = e.target.result;
                document.getElementById('upload-preview').style.display = 'block';
                document.getElementById('upload-btn').disabled = false;
                document.getElementById('upload-btn').style.background = 'var(--accent-color)';
                document.getElementById('upload-btn').style.cursor = 'pointer';
            };
            reader.readAsDataURL(file);
        }
        
        async function uploadPhoto() {
            if (!selectedFile) return;
            
            const uploadBtn = document.getElementById('upload-btn');
            const statusDiv = document.getElementById('upload-status');
            
            uploadBtn.textContent = 'Uploading...';
            uploadBtn.disabled = true;
            statusDiv.textContent = 'Uploading your photo...';
            statusDiv.style.color = 'var(--accent-color)';
            
            try {
                const fileName = `${Date.now()}_${selectedFile.name}`;
                const { data: storageData, error: storageError } = await supabase
                    .storage
                    .from('photos')
                    .upload(fileName, selectedFile);
                
                if (storageError) throw storageError;
                
                const { data: urlData } = supabase
                    .storage
                    .from('photos')
                    .getPublicUrl(fileName);
                
                const caption = document.getElementById('photo-caption').value.trim();
                const { error: dbError } = await supabase
                    .from('photos')
                    .insert([{
                        url: urlData.publicUrl,
                        caption: caption || null,
                        uploaded_by: 'naveen'
                    }]);
                
                if (dbError) throw dbError;
                
                statusDiv.textContent = '‚úì Photo uploaded successfully!';
                statusDiv.style.color = '#2ecc71';
                
                setTimeout(() => {
                    selectedFile = null;
                    document.getElementById('photo-input').value = '';
                    document.getElementById('photo-caption').value = '';
                    document.getElementById('upload-preview').style.display = 'none';
                    uploadBtn.textContent = 'Upload';
                    uploadBtn.style.background = 'var(--text-muted)';
                    uploadBtn.style.cursor = 'not-allowed';
                    statusDiv.textContent = '';
                    switchPhotoTab('gallery');
                }, 1500);
                
            } catch (error) {
                console.error('Upload error:', error);
                statusDiv.textContent = '‚úó Upload failed. Please try again.';
                statusDiv.style.color = '#e74c3c';
                uploadBtn.textContent = 'Upload';
                uploadBtn.disabled = false;
                uploadBtn.style.background = 'var(--accent-color)';
                uploadBtn.style.cursor = 'pointer';
            }
        }
        
        async function loadGallery() {
            const grid = document.getElementById('gallery-grid');
            grid.innerHTML = '<div style="text-align: center; padding: 40px; grid-column: 1/-1; color: var(--text-muted);">Loading photos...</div>';
            
            try {
                const { data, error } = await supabase
                    .from('photos')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                if (data.length === 0) {
                    grid.innerHTML = `
                        <div style="text-align: center; padding: 60px 20px; grid-column: 1/-1; color: var(--text-muted);">
                            <div style="font-size: 48px; margin-bottom: 15px;">üì∑</div>
                            <p>No photos yet. Upload your first memory!</p>
                        </div>
                    `;
                    return;
                }
                
                grid.innerHTML = data.map(photo => {
                    const date = new Date(photo.created_at).toLocaleDateString('en-US', { 
                        month: 'short', 
                        day: 'numeric',
                        year: 'numeric'
                    });
                    
                    return `
                        <div style="position: relative; border-radius: 12px; overflow: hidden; background: var(--icon-bg); box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; transition: 0.3s;" 
                             onclick="viewPhoto('${photo.url}', '${(photo.caption || '').replace(/'/g, "\\'")}', '${photo.uploaded_by}', '${date}')">
                            <img src="${photo.url}" 
                                 style="width: 100%; height: 180px; object-fit: cover; display: block;"
                                 alt="${photo.caption || 'Photo'}">
                            <div style="padding: 10px;">
                                <div style="font-size: 12px; font-weight: 600; color: var(--text-main); margin-bottom: 3px;">
                                    ${photo.uploaded_by === 'naveen' ? 'üë®' : 'üë©'} ${photo.uploaded_by}
                                </div>
                                ${photo.caption ? `<div style="font-size: 11px; color: var(--text-muted); margin-bottom: 3px;">${photo.caption}</div>` : ''}
                                <div style="font-size: 10px; color: var(--text-muted);">${date}</div>
                            </div>
                        </div>
                    `;
                }).join('');
                
            } catch (error) {
                console.error('Error loading gallery:', error);
                grid.innerHTML = '<div style="text-align: center; padding: 40px; grid-column: 1/-1; color: #e74c3c;">Error loading photos. Please refresh.</div>';
            }
        }
        
        function viewPhoto(url, caption, uploadedBy, date) {
            const viewer = document.createElement('div');
            viewer.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer;';
            
            viewer.innerHTML = `
                <img src="${url}" style="max-width: 90%; max-height: 80vh; border-radius: 8px; box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
                <div style="margin-top: 20px; text-align: center; color: white;">
                    <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">
                        ${uploadedBy === 'naveen' ? 'üë®' : 'üë©'} ${uploadedBy}
                    </div>
                    ${caption ? `<div style="font-size: 14px; margin-bottom: 8px;">${caption}</div>` : ''}
                    <div style="font-size: 12px; opacity: 0.7;">${date}</div>
                </div>
                <div style="position: absolute; top: 20px; right: 20px; font-size: 32px; color: white;">‚úï</div>
            `;
            
            viewer.onclick = () => viewer.remove();
            document.body.appendChild(viewer);
        }

        // Tinder Chat Functions
        async function loadChatMessages() {
            try {
                const { data, error } = await supabase
                    .from('messages')
                    .select('*')
                    .order('created_at', { ascending: true });
                
                if (error) throw error;
                
                const chatBody = document.getElementById('chat-body-content');
                const systemMsg = chatBody.querySelector('.chat-system');
                chatBody.innerHTML = '';
                if (systemMsg) chatBody.appendChild(systemMsg);
                
                data.forEach(msg => {
                    const bubble = document.createElement('div');
                    bubble.className = msg.from_user === 'naveen' ? 'chat-bubble me' : 'chat-bubble';
                    bubble.textContent = msg.content;
                    chatBody.appendChild(bubble);
                });
                
                chatBody.scrollTop = chatBody.scrollHeight;
                
            } catch (error) {
                console.error('Error loading messages:', error);
            }
        }
        
        function subscribeToMessages() {
            supabase
                .channel('messages-channel')
                .on('postgres_changes', 
                    { event: 'INSERT', schema: 'public', table: 'messages' },
                    (payload) => {
                        const chatBody = document.getElementById('chat-body-content');
                        if (chatBody && payload.new.from_user !== 'naveen') {
                            const bubble = document.createElement('div');
                            bubble.className = 'chat-bubble';
                            bubble.textContent = payload.new.content;
                            bubble.classList.add('initial-hidden');
                            chatBody.appendChild(bubble);
                            
                            setTimeout(() => {
                                bubble.classList.add('pop-in');
                                chatBody.scrollTop = chatBody.scrollHeight;
                            }, 100);
                        }
                    }
                )
                .subscribe();
        }
        
        subscribeToMessages();

        async function sendTinderMessage() {
            const input = document.getElementById('tinder-msg-input');
            const btn = document.querySelector('#tinder-chat-screen .chat-send');
            const chatBody = document.getElementById('chat-body-content');
            const msg = input.value.trim();

            if(!msg) return;

            const bubble = document.createElement('div');
            bubble.className = 'chat-bubble me'; 
            bubble.innerText = msg;
            chatBody.appendChild(bubble);
            chatBody.scrollTop = chatBody.scrollHeight; 

            input.value = ""; 
            const originalText = btn.innerText;
            btn.innerText = "Sending...";
            btn.disabled = true;

            try {
                const { error } = await supabase
                    .from('messages')
                    .insert([{
                        from_user: 'naveen',
                        content: msg
                    }]);
                
                if (error) throw error;
                
                btn.innerText = "Sent!";
                setTimeout(() => { 
                    btn.innerText = originalText; 
                    btn.disabled = false;
                }, 1000);
                
            } catch (error) {
                console.error('Error sending message:', error);
                btn.innerText = "Error";
                alert("Failed to send message. Please check your connection.");
                setTimeout(() => { 
                    btn.innerText = originalText; 
                    btn.disabled = false;
                }, 2000);
            }
        }

        function showChat() {
            document.getElementById('tinder-match-screen').classList.remove('active');
            document.getElementById('tinder-chat-screen').classList.add('active');
            setTimeout(() => document.getElementById('tinder-msg-input').focus(), 300);
            loadChatMessages();
        }

        function openWindow(id) {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('open'));
            const win = document.getElementById(id);
            if(win) win.classList.add('open');
        }
        
        function closeWindow(id) { 
            const win = document.getElementById(id);
            if(win) win.classList.remove('open');
            
            if(id === 'win-music') {
                const a = document.getElementById('audio-file'); 
                if(a) a.pause();
                const btn = document.getElementById('play-btn');
                if(btn) btn.textContent = '‚ñ∂';
            }
            if(id === 'win-youtube') {
                const iframe = document.getElementById('rickroll-frame');
                if(iframe) { const src = iframe.src; iframe.src = ''; iframe.src = src; }
            }
            if(id === 'win-monitor') { clearInterval(monitorInterval); }
            if(id === 'win-tinder') {
                setTimeout(() => {
                    const card = document.getElementById('tinder-card');
                    if(card) { card.style.transform = ''; card.style.opacity = '1'; }
                    const match = document.getElementById('tinder-match-screen');
                    if(match) match.classList.remove('active');
                    const chat = document.getElementById('tinder-chat-screen');
                    if(chat) chat.classList.remove('active');
                }, 300);
            }
        }

        function toggleTheme(btn) {
            btn.classList.toggle('active');
            if(document.body.getAttribute('data-theme') === 'dark'){
                document.body.removeAttribute('data-theme');
            } else {
                document.body.setAttribute('data-theme', 'dark');
            }
        }

        function playSound(id) {
            const sound = document.getElementById(id);
            if(sound) {
                sound.currentTime = 0;
                sound.play().catch(() => alert("Sound file not found! Check filenames."));
            }
        }

        function closeOverlay() {
            document.getElementById('overlay').classList.remove('show');
        }

        // Clock Logic
        function updateClock() {
            const now = new Date();
            const options = { hour: '2-digit', minute: '2-digit', hour12: false };
            const getTimeString = (tz) => {
                let timeStr = now.toLocaleTimeString('en-US', { ...options, timeZone: tz });
                if (timeStr.startsWith('24')) {
                    timeStr = timeStr.replace('24', '00');
                }
                return timeStr;
            };

            const tpeEl = document.getElementById('clock-tpe');
            if(tpeEl) tpeEl.innerHTML = `<span>TPE</span> ${getTimeString('Asia/Taipei')}`;
            
            const delEl = document.getElementById('clock-del');
            if(delEl) delEl.innerHTML = `<span>DEL</span> ${getTimeString('Asia/Kolkata')}`;
        }

        setInterval(updateClock, 1000); 
        updateClock();

        // Audio Player Logic
        const audio = document.getElementById('audio-file');
        const playBtn = document.getElementById('play-btn');
        const slider = document.getElementById('seek-slider');
        
        function togglePlay() {
            if(audio && audio.paused) { 
                audio.play().then(()=>playBtn.textContent='‚è∏').catch(()=>alert("Upload voice-note.mp3!")); 
            } else if(audio) { 
                audio.pause(); playBtn.textContent='‚ñ∂'; 
            }
        }
        if(audio) {
            audio.addEventListener('timeupdate', () => { slider.value = (audio.currentTime/audio.duration)*100; });
            slider.addEventListener('input', () => { audio.currentTime = (slider.value/100)*audio.duration; });
        }

        // Terminal Logic
        function focusTerminal() { setTimeout(() => document.getElementById('term-input').focus(), 100); }
        function handleCommand(e) {
            if (e.key === 'Enter') {
                const input = document.getElementById('term-input');
                const output = document.getElementById('term-output');
                const cmd = input.value.trim().toLowerCase();
                output.innerHTML += `<div><span style="color:#4af626">naveen@baobao:~$</span> ${cmd}</div>`;
                let response = "";
                switch(cmd) {
                    case 'help': response = "Commands: love, abi, blanket, chai, chopsticks, lick, clear"; break;
                    case 'love': response = "Start: 2025-10-13.<br>Status: We are going stronger!!"; break;
                    case 'abi': response = "Just a reminder that somewhere in the world, someone is always thinking of you"; break;
                    case 'blanket': response = "Deploying virtual blanket üõå Warmth level: 100%. Snuggle together"; break;
                    case 'chai': response = "Brewing Chai... Spice level: As hot as you. Don't drink in a single go!"; break;
                    case 'chopsticks': response = "Skill check: Expert ü•¢ Ready for noodles date in Taiwan hehe"; break;
                    case 'lick': response = "SUS why are you typing this üëÖ"; break;    
                    case 'clear': output.innerHTML = ""; input.value = ""; return;
                    default: response = `Command not found: ${cmd}. Try 'help'.`;
                }
                if(response) output.innerHTML += `<div style="color:#ccc; margin-bottom:10px;">${response}</div>`;
                input.value = ""; output.scrollTop = output.scrollHeight;
            }
        }

        // Tinder Logic
        const cardWrap = document.getElementById('card-wrap');
        const card = document.getElementById('tinder-card');
        let isDragging = false;
        let startX, currentX;

        if(cardWrap) {
            cardWrap.addEventListener('mousedown', (e) => { isDragging = true; startX = e.clientX; card.style.transition = 'none'; });
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                currentX = e.clientX - startX;
                card.style.transform = `translateX(${currentX}px) rotate(${currentX * 0.1}deg)`;
            });
            document.addEventListener('mouseup', endDrag);
            
            cardWrap.addEventListener('touchstart', (e) => { isDragging = true; startX = e.touches[0].clientX; card.style.transition = 'none'; });
            
            document.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                e.preventDefault(); 
                currentX = e.touches[0].clientX - startX;
                card.style.transform = `translateX(${currentX}px) rotate(${currentX * 0.1}deg)`;
            }, { passive: false });

            document.addEventListener('touchend', endDrag);
        }

        function endDrag() {
            if (!isDragging) return;
            isDragging = false;
            if(card) {
                card.style.transition = 'transform 0.5s ease';
                if (currentX > 100) { handleSwipeRight(); } 
                else if (currentX < -100) { card.style.transform = 'translateX(0) rotate(0)'; alert("oops! left swipe not allowed hehe"); } 
                else { card.style.transform = 'translateX(0) rotate(0)'; }
            }
        }

        function startTinder() {
            setTimeout(() => {
                if(card) { card.style.transform = ''; card.style.opacity = '1'; }
                const match = document.getElementById('tinder-match-screen');
                if(match) match.classList.remove('active');
                const chat = document.getElementById('tinder-chat-screen');
                if(chat) chat.classList.remove('active');
            }, 100);
        }

        function handleSwipeRight() {
            if(card) {
                card.style.transition = 'transform 0.8s ease, opacity 0.8s ease';
                card.style.transform = 'translateX(500px) rotate(45deg)';
                card.style.opacity = '0';
                setTimeout(() => { document.getElementById('tinder-match-screen').classList.add('active'); }, 600);
            }
        }

        // Monitor Logic
        let monitorInterval;
        function startMonitor() {
            const cpu = document.getElementById('bar-cpu');
            const mem = document.getElementById('bar-mem');
            const hr = document.getElementById('bar-hr');
            const valCpu = document.getElementById('val-cpu');
            const valMem = document.getElementById('val-mem');
            const valHr = document.getElementById('val-hr');

            if(cpu) {
                monitorInterval = setInterval(() => {
                    let c = Math.floor(Math.random() * 6) + 95;
                    cpu.style.width = c + "%"; valCpu.innerText = c + "%";
                    mem.style.width = "99%"; valMem.innerText = "99%";
                    let h = Math.floor(Math.random() * 20) + 110;
                    hr.style.width = (h/2) + "%"; valHr.innerText = h + " BPM";
                }, 800);
            }
        }

        // Confetti Logic
        const cvs = document.getElementById('confetti-canvas');
        const ctx = cvs.getContext('2d');
        cvs.width = window.innerWidth; cvs.height = window.innerHeight;
        let conf = []; let spawning = false;
        const cols = ['#007AFF','#FF2D55','#5856D6','#FF9500'];
        function spawn() { for(let i=0;i<150;i++) conf.push({x:Math.random()*cvs.width, y:Math.random()*cvs.height-cvs.height, c:cols[Math.floor(Math.random()*cols.length)], s:Math.random()*8+5, v:Math.random()*6+3, a:Math.random()*6}); }
        function draw() {
            ctx.clearRect(0,0,cvs.width,cvs.height);
            let act=0;
            conf.forEach(p=>{
                p.y+=p.v; p.x+=Math.sin(p.a)*2;
                if(p.y<cvs.height) { ctx.fillStyle=p.c; ctx.fillRect(p.x,p.y,p.s,p.s); act++; }
                else if(spawning) { p.y=-10; p.x=Math.random()*cvs.width; act++; }
            });
            if(act>0) requestAnimationFrame(draw);
        }
        function deploySystem() {
            document.getElementById('overlay').classList.add('show');
            spawning=true; spawn(); draw();
            setTimeout(()=>{spawning=false;},3000);
        }
        window.addEventListener('resize', ()=>{cvs.width=window.innerWidth; cvs.height=window.innerHeight;});
    </script>
</body>
</html>
